Index: .idea/.gitignore
===================================================================
--- .idea/.gitignore	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ .idea/.gitignore	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
@@ -1,3 +0,0 @@
-# Default ignored files
-/shelf/
-/workspace.xml
Index: .idea/codeStyles/Project.xml
===================================================================
--- .idea/codeStyles/Project.xml	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ .idea/codeStyles/Project.xml	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
@@ -1,116 +0,0 @@
-<component name="ProjectCodeStyleConfiguration">
-  <code_scheme name="Project" version="173">
-    <codeStyleSettings language="XML">
-      <indentOptions>
-        <option name="CONTINUATION_INDENT_SIZE" value="4" />
-      </indentOptions>
-      <arrangement>
-        <rules>
-          <section>
-            <rule>
-              <match>
-                <AND>
-                  <NAME>xmlns:android</NAME>
-                  <XML_ATTRIBUTE />
-                  <XML_NAMESPACE>^$</XML_NAMESPACE>
-                </AND>
-              </match>
-            </rule>
-          </section>
-          <section>
-            <rule>
-              <match>
-                <AND>
-                  <NAME>xmlns:.*</NAME>
-                  <XML_ATTRIBUTE />
-                  <XML_NAMESPACE>^$</XML_NAMESPACE>
-                </AND>
-              </match>
-              <order>BY_NAME</order>
-            </rule>
-          </section>
-          <section>
-            <rule>
-              <match>
-                <AND>
-                  <NAME>.*:id</NAME>
-                  <XML_ATTRIBUTE />
-                  <XML_NAMESPACE>http://schemas.android.com/apk/res/android</XML_NAMESPACE>
-                </AND>
-              </match>
-            </rule>
-          </section>
-          <section>
-            <rule>
-              <match>
-                <AND>
-                  <NAME>.*:name</NAME>
-                  <XML_ATTRIBUTE />
-                  <XML_NAMESPACE>http://schemas.android.com/apk/res/android</XML_NAMESPACE>
-                </AND>
-              </match>
-            </rule>
-          </section>
-          <section>
-            <rule>
-              <match>
-                <AND>
-                  <NAME>name</NAME>
-                  <XML_ATTRIBUTE />
-                  <XML_NAMESPACE>^$</XML_NAMESPACE>
-                </AND>
-              </match>
-            </rule>
-          </section>
-          <section>
-            <rule>
-              <match>
-                <AND>
-                  <NAME>style</NAME>
-                  <XML_ATTRIBUTE />
-                  <XML_NAMESPACE>^$</XML_NAMESPACE>
-                </AND>
-              </match>
-            </rule>
-          </section>
-          <section>
-            <rule>
-              <match>
-                <AND>
-                  <NAME>.*</NAME>
-                  <XML_ATTRIBUTE />
-                  <XML_NAMESPACE>^$</XML_NAMESPACE>
-                </AND>
-              </match>
-              <order>BY_NAME</order>
-            </rule>
-          </section>
-          <section>
-            <rule>
-              <match>
-                <AND>
-                  <NAME>.*</NAME>
-                  <XML_ATTRIBUTE />
-                  <XML_NAMESPACE>http://schemas.android.com/apk/res/android</XML_NAMESPACE>
-                </AND>
-              </match>
-              <order>ANDROID_ATTRIBUTE_ORDER</order>
-            </rule>
-          </section>
-          <section>
-            <rule>
-              <match>
-                <AND>
-                  <NAME>.*</NAME>
-                  <XML_ATTRIBUTE />
-                  <XML_NAMESPACE>.*</XML_NAMESPACE>
-                </AND>
-              </match>
-              <order>BY_NAME</order>
-            </rule>
-          </section>
-        </rules>
-      </arrangement>
-    </codeStyleSettings>
-  </code_scheme>
-</component>
\ No newline at end of file
Index: .idea/runConfigurations.xml
===================================================================
--- .idea/runConfigurations.xml	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ .idea/runConfigurations.xml	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
@@ -1,12 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<project version="4">
-  <component name="RunConfigurationProducerService">
-    <option name="ignoredProducers">
-      <set>
-        <option value="org.jetbrains.plugins.gradle.execution.test.runner.AllInPackageGradleConfigurationProducer" />
-        <option value="org.jetbrains.plugins.gradle.execution.test.runner.TestClassGradleConfigurationProducer" />
-        <option value="org.jetbrains.plugins.gradle.execution.test.runner.TestMethodGradleConfigurationProducer" />
-      </set>
-    </option>
-  </component>
-</project>
\ No newline at end of file
Index: app/src/main/res/layout/activity_main_register_car.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:fillViewport=\"true\"\r\n    tools:context=\".MainActivityRegisterCar\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <EditText\r\n            android:id=\"@+id/yearCar3\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:ems=\"8\"\r\n            android:hint=\"שנת יצור רכב\"\r\n            android:inputType=\"number\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/typeCar3\" />\r\n\r\n\r\n        <ImageView\r\n            android:id=\"@+id/image13\"\r\n            android:layout_width=\"130dp\"\r\n            android:layout_height=\"130dp\"\r\n            android:src=\"@drawable/ic_car\"\r\n\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n        <ImageView\r\n            android:id=\"@+id/image23\"\r\n            android:layout_width=\"130dp\"\r\n            android:layout_height=\"130dp\"\r\n            android:layout_marginTop=\"5dp\"\r\n            android:src=\"@drawable/ic_car\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/image13\" />\r\n\r\n\r\n        <ImageView\r\n            android:id=\"@+id/image33\"\r\n            android:layout_width=\"130dp\"\r\n            android:layout_height=\"130dp\"\r\n            android:layout_marginStart=\"6dp\"\r\n\r\n            android:src=\"@drawable/ic_car\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/image13\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n\r\n        <ImageView\r\n            android:id=\"@+id/image43\"\r\n            android:layout_width=\"130dp\"\r\n            android:layout_height=\"130dp\"\r\n            android:layout_marginStart=\"6dp\"\r\n            android:layout_marginTop=\"4dp\"\r\n            android:src=\"@drawable/ic_car\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/image23\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/image33\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/nameMen3\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:ems=\"8\"\r\n            android:hint=\"שם\"\r\n            android:inputType=\"textPersonName\"\r\n            app:layout_constraintBottom_toBottomOf=\"@+id/typeCar3\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/typeCar3\"\r\n            app:layout_constraintTop_toTopOf=\"@+id/typeCar3\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/phone3\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"8dp\"\r\n            android:ems=\"8\"\r\n            android:hint=\"פלאפון\"\r\n            android:inputType=\"number\"\r\n            app:layout_constraintBottom_toBottomOf=\"@+id/yearCar3\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/yearCar3\"\r\n            app:layout_constraintTop_toTopOf=\"@+id/yearCar3\"\r\n            app:layout_constraintVertical_bias=\"0.0\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/manyDay3\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:ems=\"8\"\r\n            android:hint=\"מחיר ליום\"\r\n            android:inputType=\"number\"\r\n            app:layout_constraintBottom_toBottomOf=\"@+id/insurance3\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/insurance3\"\r\n            app:layout_constraintTop_toTopOf=\"@+id/insurance3\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/typeCar3\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"35dp\"\r\n            android:ems=\"8\"\r\n            android:hint=\"סוג רכב\"\r\n            android:inputType=\"textPersonName\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/image23\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/insurance3\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:ems=\"8\"\r\n            android:hint=\"סוג ביטוח\"\r\n            android:inputType=\"textPersonName\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/yearCar3\" />\r\n\r\n\r\n        <EditText\r\n            android:id=\"@+id/city3\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n\r\n            android:layout_marginTop=\"20dp\"\r\n            android:ems=\"8\"\r\n            android:hint=\"עיר/ישוב\"\r\n            android:inputType=\"textPersonName\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/insurance3\" />\r\n\r\n\r\n        <EditText\r\n            android:id=\"@+id/endDate23\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:ems=\"8\"\r\n            android:hint=\"עד תאריך\"\r\n            android:inputType=\"date\"\r\n            app:layout_constraintBottom_toBottomOf=\"@+id/startDate23\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/startDate23\"\r\n            app:layout_constraintTop_toTopOf=\"@+id/startDate23\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/startDate23\"\r\n\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:ems=\"8\"\r\n            android:hint=\"מתאריך\"\r\n            android:inputType=\"date\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/city3\" />\r\n\r\n\r\n        <Button\r\n            android:id=\"@+id/upgrade3\"\r\n            style=\"@style/Widget.AppCompat.Button.Small\"\r\n            android:layout_width=\"110dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"2dp\"\r\n            android:text=\"לחץ על התמונות להעלאת תמונות\"\r\n\r\n            android:textSize=\"11dp\"\r\n            app:backgroundTint=\"#A19797\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/image43\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/image33\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/image33\" />\r\n\r\n        <Spinner\r\n            android:id=\"@+id/spinnerArea3\"\r\n            android:layout_width=\"150dp\"\r\n            android:layout_height=\"20dp\"\r\n            android:layout_marginStart=\"70dp\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/endDate23\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/city3\"\r\n            app:layout_constraintTop_toTopOf=\"@+id/city3\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/buttonReturnMainPage\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"40dp\"\r\n            android:layout_marginTop=\"50dp\"\r\n            android:text=\"לפרסום\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/startDate23\"\r\n            app:layout_constraintStart_toStartOf=\"@+id/endDate23\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/remarksRegisterCar3\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/remarksRegisterCar3\"\r\n            android:layout_width=\"320dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:ems=\"8\"\r\n            android:hint=\"הוסף הערות כגון: לפחות להשכרה של שלושה ימים\"\r\n            android:inputType=\"textPersonName\"\r\n            android:textSize=\"12dp\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/startDate23\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/startDate23\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/buttonMyPage\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:layout_marginTop=\"50dp\"\r\n            android:text=\"לעמוד שלי\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/buttonReturnMainPage\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/remarksRegisterCar3\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnName\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/nameMen3\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/nameMen3\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnTypeCar\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/typeCar3\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/typeCar3\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnPhone\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/phone3\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/phone3\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnYearCar\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/yearCar3\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/yearCar3\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnPrice\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/manyDay3\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/manyDay3\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnInsurance\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginEnd=\"2dp\"\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/insurance3\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/insurance3\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnCity\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginEnd=\"6dp\"\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/city3\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/city3\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnArea\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginEnd=\"40dp\"\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/spinnerArea3\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/spinnerArea3\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnDataEnd\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginEnd=\"2dp\"\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/endDate23\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/endDate23\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnDateStart\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/startDate23\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/startDate23\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnRemarker\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/remarksRegisterCar3\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/remarksRegisterCar3\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnAll\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/buttonReturnMainPage\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/buttonReturnMainPage\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/warnImage\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n\r\n            android:text=\"TextView\"\r\n            android:textColor=\"#EF2B2B\"\r\n\r\n            android:textSize=\"10sp\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/upgrade3\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/upgrade3\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/buttonDelete\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"50dp\"\r\n            android:layout_marginEnd=\"15dp\"\r\n            android:text=\"מחיקת כרטיס\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintEnd_toStartOf=\"@+id/buttonReturnMainPage\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/remarksRegisterCar3\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/editTextRejection\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:ems=\"5\"\r\n            android:hint=\"הסבר סירוב\"\r\n            android:inputType=\"textPersonName\"\r\n            android:textSize=\"12dp\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintBottom_toTopOf=\"@+id/buttonMyPage\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/buttonMyPage\" />\r\n\r\n\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n</ScrollView>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_main_register_car.xml	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ app/src/main/res/layout/activity_main_register_car.xml	(date 1607521114000)
@@ -199,12 +199,13 @@
             android:id="@+id/remarksRegisterCar3"
             android:layout_width="320dp"
             android:layout_height="wrap_content"
-            android:layout_marginTop="20dp"
+            android:layout_marginTop="21dp"
             android:ems="8"
             android:hint="הוסף הערות כגון: לפחות להשכרה של שלושה ימים"
             android:inputType="textPersonName"
             android:textSize="12dp"
-            app:layout_constraintEnd_toEndOf="@+id/startDate23"
+            app:layout_constraintEnd_toEndOf="@+id/endDate23"
+            app:layout_constraintStart_toStartOf="@+id/startDate23"
             app:layout_constraintTop_toBottomOf="@+id/startDate23" />
 
         <Button
@@ -378,7 +379,6 @@
             app:layout_constraintEnd_toEndOf="@+id/buttonMyPage" />
 
 
-
     </androidx.constraintlayout.widget.ConstraintLayout>
 
 
Index: app/src/main/java/com/example/rentit/MainActivityPageUser.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.rentit;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.Button;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\npublic class MainActivityPageUser extends AppCompatActivity {\r\n    private Button cardButton;\r\n    private Button pageMainButton;\r\n    private CardCarAdapter cardCarAdapter;\r\n    private ListView lv;\r\n    private DatabaseReference cardRef2;\r\n    private TextView textViewExplanation;\r\n   private ProgressDialog progressDialog;\r\n\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseUser firebaseUser;\r\n    private String email=\"\";\r\n    private RegisterInformation registerInformation=null;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main_page_user);\r\n\r\n         progressDialog = new ProgressDialog(this);\r\n        progressDialog.setMessage(\"טוען כרטיסים...\");\r\n        progressDialog.show();\r\n        mAuth = FirebaseAuth.getInstance();\r\n        firebaseUser = mAuth.getCurrentUser();\r\n\r\n        try {\r\n    if(!firebaseUser.getEmail().toString().isEmpty())\r\n        email = firebaseUser.getEmail().toString();\r\n    else   email = firebaseUser.getPhoneNumber().toString();\r\n}\r\ncatch (RuntimeException e){\r\n    email = firebaseUser.getPhoneNumber().toString();\r\n}\r\n\r\n        Toast.makeText(MainActivityPageUser.this, \"\"+email, Toast.LENGTH_LONG).show();\r\n\r\n            if (email.equals(\"arielrentit@gmail.com\")) {\r\n                Intent intent = new Intent(MainActivityPageUser.this, MainActivityManagementCardsApprov.class);\r\n                startActivityForResult(intent, 0);\r\n            }\r\n            cardRef2 = FirebaseDatabase.getInstance().getReference(\"RegisterInformation\");\r\n            // progressDialog.setMessage(\"Registering Please Wait...\");\r\n            //   Toast.makeText(MainActivityPageUser.this, email, Toast.LENGTH_LONG).show();\r\n\r\n            // progressDialog.show();\r\n            cardRef2.orderByChild(\"email\").equalTo(email).addListenerForSingleValueEvent(new ValueEventListener() {\r\n                @SuppressLint(\"ResourceAsColor\")\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                    for (DataSnapshot child : dataSnapshot.getChildren()) {\r\n                        registerInformation = child.getValue(RegisterInformation.class);\r\n                    }\r\n\r\n                    if (registerInformation!=null&&registerInformation.getCardsUser().size() > 0) {\r\n\r\n                        // Toast.makeText(MainActivityPageUser.this, \"\"+registerInformation.getCardsUser().get(0).getImageViewArrayListName().get(0), Toast.LENGTH_LONG).show();\r\n\r\n                        cardCarAdapter = new CardCarAdapter(MainActivityPageUser.this, 0, 0, registerInformation.getCardsUser());\r\n                        //phase 4 reference to listview\r\n                        lv = (ListView) findViewById(R.id.lv);\r\n                        lv.setAdapter(cardCarAdapter);\r\n\r\n                        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                            @Override\r\n                            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {\r\n                                Intent intent = new Intent(MainActivityPageUser.this, MainActivityRegisterCar.class);\r\n                                intent.putExtra(\"position\", i);\r\n                                pass(intent, registerInformation.getCardsUser().get(i));\r\n                                startActivityForResult(intent, 0);\r\n                            }\r\n                        });\r\n                    }\r\n                    else{\r\n                   textViewExplanation=     findViewById(R.id.textViewExplanationPage);\r\n                        textViewExplanation.setText(\"אין כרטיסים להצגה\");\r\n                        textViewExplanation.setTextColor( -65536);\r\n\r\n                    }\r\n\r\n                    progressDialog.dismiss();\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                }\r\n            });\r\n            //     progressDialog.dismiss();\r\n\r\n\r\n\r\n        cardButton = findViewById(R.id.publish);\r\n        pageMainButton = findViewById(R.id.pageMain2);\r\n\r\n        cardButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(MainActivityPageUser.this, MainActivityRegisterCar.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        pageMainButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(MainActivityPageUser.this, MainActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void pass(Intent intent, CardCar cardCar) {\r\n        intent.putExtra(\"flagEdit\", true);\r\n        intent.putExtra(\"name\", cardCar.getName());\r\n        intent.putExtra(\"typeCar\", cardCar.getTypeCar());\r\n        intent.putExtra(\"area\", cardCar.getArea());\r\n        intent.putExtra(\"city\", cardCar.getCity());\r\n        intent.putExtra(\"dateEnd\", cardCar.getDateEnd());\r\n        intent.putExtra(\"dateStart\", cardCar.getDateStart());\r\n        intent.putExtra(\"id\", cardCar.getId());\r\n        intent.putExtra(\"insurance\", cardCar.getInsurance());\r\n        intent.putExtra(\"numImage\", cardCar.getNumImage());\r\n        intent.putExtra(\"permissionToPublish\", cardCar.getPermissionToPublish());\r\n        intent.putExtra(\"phone\", cardCar.getPhone());\r\n        intent.putExtra(\"priceDay\", cardCar.getPriceDay());\r\n        intent.putExtra(\"remarks\", cardCar.getRemarks());\r\n        intent.putExtra(\"yearCar\", cardCar.getYearCar());\r\n        intent.putExtra(\"email\", cardCar.getEmail());\r\n        intent.putExtra(\"key\", cardCar.getKey());\r\n        for (int i = 1; i <= cardCar.getImageViewArrayListName().size(); i++) {\r\n            intent.putExtra(\"image\" + i, cardCar.getImageViewArrayListName().get(i - 1));\r\n        }\r\n\r\n\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/rentit/MainActivityPageUser.java	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ app/src/main/java/com/example/rentit/MainActivityPageUser.java	(date 1607563786000)
@@ -29,12 +29,12 @@
     private ListView lv;
     private DatabaseReference cardRef2;
     private TextView textViewExplanation;
-   private ProgressDialog progressDialog;
+    private ProgressDialog progressDialog;
 
     private FirebaseAuth mAuth;
     private FirebaseUser firebaseUser;
-    private String email="";
-    private RegisterInformation registerInformation=null;
+    private String email = "";
+    private RegisterInformation registerInformation = null;
 
 
     @Override
@@ -42,77 +42,67 @@
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main_page_user);
 
-         progressDialog = new ProgressDialog(this);
+        progressDialog = new ProgressDialog(this);
         progressDialog.setMessage("טוען כרטיסים...");
         progressDialog.show();
         mAuth = FirebaseAuth.getInstance();
         firebaseUser = mAuth.getCurrentUser();
 
         try {
-    if(!firebaseUser.getEmail().toString().isEmpty())
-        email = firebaseUser.getEmail().toString();
-    else   email = firebaseUser.getPhoneNumber().toString();
-}
-catch (RuntimeException e){
-    email = firebaseUser.getPhoneNumber().toString();
-}
+            if (!firebaseUser.getEmail().toString().isEmpty())
+                email = firebaseUser.getEmail().toString();
+            else email = firebaseUser.getPhoneNumber().toString();
+        } catch (RuntimeException e) {
+            email = firebaseUser.getPhoneNumber().toString();
+        }
 
-        Toast.makeText(MainActivityPageUser.this, ""+email, Toast.LENGTH_LONG).show();
+        //Toast.makeText(MainActivityPageUser.this, "" + email, Toast.LENGTH_LONG).show();
 
-            if (email.equals("arielrentit@gmail.com")) {
-                Intent intent = new Intent(MainActivityPageUser.this, MainActivityManagementCardsApprov.class);
-                startActivityForResult(intent, 0);
-            }
-            cardRef2 = FirebaseDatabase.getInstance().getReference("RegisterInformation");
-            // progressDialog.setMessage("Registering Please Wait...");
-            //   Toast.makeText(MainActivityPageUser.this, email, Toast.LENGTH_LONG).show();
+        if (email.equals("arielrentit@gmail.com")) {
+            Intent intent = new Intent(MainActivityPageUser.this, MainActivityManagementCardsApprov.class);
+            startActivityForResult(intent, 0);
+        }
+        cardRef2 = FirebaseDatabase.getInstance().getReference("RegisterInformation");
+        // progressDialog.setMessage("Registering Please Wait...");
+        //   Toast.makeText(MainActivityPageUser.this, email, Toast.LENGTH_LONG).show();
 
-            // progressDialog.show();
-            cardRef2.orderByChild("email").equalTo(email).addListenerForSingleValueEvent(new ValueEventListener() {
-                @SuppressLint("ResourceAsColor")
-                @Override
-                public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
-                    for (DataSnapshot child : dataSnapshot.getChildren()) {
-                        registerInformation = child.getValue(RegisterInformation.class);
-                    }
-
-                    if (registerInformation!=null&&registerInformation.getCardsUser().size() > 0) {
-
-                        // Toast.makeText(MainActivityPageUser.this, ""+registerInformation.getCardsUser().get(0).getImageViewArrayListName().get(0), Toast.LENGTH_LONG).show();
-
-                        cardCarAdapter = new CardCarAdapter(MainActivityPageUser.this, 0, 0, registerInformation.getCardsUser());
-                        //phase 4 reference to listview
-                        lv = (ListView) findViewById(R.id.lv);
-                        lv.setAdapter(cardCarAdapter);
+        // progressDialog.show();
+        cardRef2.orderByChild("email").equalTo(email).addListenerForSingleValueEvent(new ValueEventListener() {
+            @SuppressLint("ResourceAsColor")
+            @Override
+            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
+                for (DataSnapshot child : dataSnapshot.getChildren()) {
+                    registerInformation = child.getValue(RegisterInformation.class);
+                }
+                if (registerInformation != null && registerInformation.getCardsUser().size() > 0) {
+                    cardCarAdapter = new CardCarAdapter(MainActivityPageUser.this, 0, 0, registerInformation.getCardsUser());
+                    //phase 4 reference to listview
+                    lv = (ListView) findViewById(R.id.lv);
+                    lv.setAdapter(cardCarAdapter);
 
-                        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
-                            @Override
-                            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
-                                Intent intent = new Intent(MainActivityPageUser.this, MainActivityRegisterCar.class);
-                                intent.putExtra("position", i);
-                                pass(intent, registerInformation.getCardsUser().get(i));
-                                startActivityForResult(intent, 0);
-                            }
-                        });
-                    }
-                    else{
-                   textViewExplanation=     findViewById(R.id.textViewExplanationPage);
-                        textViewExplanation.setText("אין כרטיסים להצגה");
-                        textViewExplanation.setTextColor( -65536);
-
-                    }
+                    lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
+                        @Override
+                        public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
+                            Intent intent = new Intent(MainActivityPageUser.this, MainActivityRegisterCar.class);
+                            intent.putExtra("position", i);
+                            pass(intent, registerInformation.getCardsUser().get(i));
+                            startActivityForResult(intent, 0);
+                        }
+                    });
+                } else {
+                    textViewExplanation = findViewById(R.id.textViewExplanationPage);
+                    textViewExplanation.setText("אין כרטיסים להצגה");
+                    textViewExplanation.setTextColor(-65536);
+                }
 
-                    progressDialog.dismiss();
-                }
+                progressDialog.dismiss();
+            }
 
-                @Override
-                public void onCancelled(@NonNull DatabaseError databaseError) {
+            @Override
+            public void onCancelled(@NonNull DatabaseError databaseError) {
 
-                }
-            });
-            //     progressDialog.dismiss();
-
-
+            }
+        });
 
         cardButton = findViewById(R.id.publish);
         pageMainButton = findViewById(R.id.pageMain2);
@@ -154,6 +144,8 @@
         intent.putExtra("yearCar", cardCar.getYearCar());
         intent.putExtra("email", cardCar.getEmail());
         intent.putExtra("key", cardCar.getKey());
+        intent.putExtra("rejection", cardCar.getRejection());
+
         for (int i = 1; i <= cardCar.getImageViewArrayListName().size(); i++) {
             intent.putExtra("image" + i, cardCar.getImageViewArrayListName().get(i - 1));
         }
Index: app/src/main/java/com/example/rentit/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.rentit;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Dialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.EditText;\r\nimport android.widget.ListView;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.FirebaseException;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.PhoneAuthCredential;\r\nimport com.google.firebase.auth.PhoneAuthOptions;\r\nimport com.google.firebase.auth.PhoneAuthProvider;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    private FirebaseUser firebaseUser;\r\n    private FirebaseAuth mAuth;\r\n    private CheckBox checkBox;\r\n    private PhoneAuthProvider.OnVerificationStateChangedCallbacks mCallBacks;\r\n    private String mobile;\r\n    private String mVerificationId;\r\n    private Boolean flagCode = false;\r\nint x;\r\n    private Dialog d;\r\n    private EditText editTextEmail, editTextPassword;\r\n    private EditText editTextStartdate, editTextEndData;\r\n    private Button loginButtonMain, loginButtonIn, searchButton, buttonSeeAll;\r\n    private ProgressDialog progressDialog;\r\n    private Button registerButton;\r\n    private Button feedbekButton;\r\n    private Spinner areaSpinner;\r\n    private Spinner priceSpinner;\r\n    private ArrayList<String> areaList = new ArrayList<>();\r\n    private ArrayList<String> priceList = new ArrayList<>();\r\n    private DatabaseReference cardRef2;\r\n    private DatabaseReference cardRef;\r\n\r\n    private TextView textViewWarnEmail, textViewWarnPassword, textViewWarnAll, textVieeTittel;\r\nint y;\r\n\r\n    private RegisterInformation registerInformation;\r\n    private RegisterInformation registerInformation1;\r\n\r\n    private CardCarAdapter cardCarAdapter = null;\r\n    private ListView lv1;\r\n    private CardCarAdapter toyAdapter1;\r\n    private ListView lv11;\r\n    private String area = \"\";\r\n    private String price = \"\";\r\n    private List<CardCar> arrayListCards;\r\n    private List<CardCar> arrayListCards2;\r\n\r\n    private Boolean flagConnected;\r\n    private TextView textViewWarnSearch;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        progressDialog = new ProgressDialog(this);\r\n        flagCode = false;\r\n        setmCallBacks();\r\n        mAuth = FirebaseAuth.getInstance();\r\n        textVieeTittel = findViewById(R.id.title);\r\n        editTextStartdate = findViewById(R.id.startData);\r\n        editTextEndData = findViewById(R.id.endData);\r\n        areaSpinner = findViewById(R.id.area);\r\n        textViewWarnSearch = findViewById(R.id.textViewWarnSearch);\r\n        priceSpinner = findViewById(R.id.price);\r\n        setLists();\r\n        ArrayAdapter<String> areaAdapter = new ArrayAdapter<>(this,\r\n                android.R.layout.simple_spinner_dropdown_item, areaList);\r\n        ArrayAdapter<String> priceAdapter = new ArrayAdapter<>(this,\r\n                android.R.layout.simple_spinner_dropdown_item, priceList);\r\n        areaSpinner.setAdapter(areaAdapter);\r\n        priceSpinner.setAdapter(priceAdapter);\r\n        setSpinerArea();\r\n\r\n\r\n        searchButton = findViewById(R.id.search);\r\n        buttonSeeAll = findViewById(R.id.buttonSeeAll);\r\n        registerButton = findViewById(R.id.register);\r\n        feedbekButton = findViewById(R.id.feedback);\r\n        loginButtonMain = findViewById(R.id.login);\r\n        firebaseUser = mAuth.getCurrentUser();\r\n        flagConnected = false;\r\n        if (firebaseUser != null) {\r\n            flagConnected = true;\r\n            loginButtonMain.setText(\"יציאה\");\r\n            registerButton.setText(\"לעמוד שלי\");\r\n        }\r\n\r\n\r\n        viewCards();\r\n\r\n        searchButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog.setMessage(\"טוען כרטיסים...\");\r\n                progressDialog.show();\r\n                search();\r\n\r\n\r\n            }\r\n        });\r\n        loginButtonMain.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                mAuth = FirebaseAuth.getInstance();\r\n                firebaseUser = mAuth.getCurrentUser();\r\n                if (firebaseUser != null) {\r\n                    Toast.makeText(MainActivity.this, \"!!!!!!!!!!!!!\", Toast.LENGTH_SHORT).show();\r\n                    mAuth.signOut();\r\n                    Intent intent = new Intent(MainActivity.this, MainActivity.class);\r\n                    startActivity(intent);\r\n\r\n//                    loginButtonMain.setText(\"כניסה\");\r\n//                    registerButton.setText(\"הרשמה\");\r\n\r\n                } else\r\n                    dialod();\r\n            }\r\n        });\r\n\r\n        registerButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                firebaseUser = mAuth.getCurrentUser();\r\n                if (firebaseUser != null) {\r\n                    Intent intent = new Intent(MainActivity.this, MainActivityPageUser.class);\r\n                    startActivity(intent);\r\n\r\n                } else {\r\n                    Intent intent = new Intent(MainActivity.this, MainActivityRegister.class);\r\n                    startActivity(intent);\r\n                }\r\n            }\r\n        });\r\n\r\n        buttonSeeAll.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                viewCards();\r\n\r\n            }\r\n        });\r\n\r\n        feedbekButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(MainActivity.this, MainActivityFeedback.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void search() {\r\n        textViewWarnSearch.setVisibility(View.GONE);\r\n        cardRef = FirebaseDatabase.getInstance().getReference(\"CardsApprov\");\r\n        //   Toast.makeText(MainActivityPageUser.this, email, Toast.LENGTH_LONG).show();\r\n        //cardRef2.child(\"cardsUser\").orderByChild(\"priceDay\").equalTo(\"100\");\r\n        cardRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                arrayListCards2 = new ArrayList<>();\r\n                CardCar cardCar;\r\n                for (DataSnapshot child : dataSnapshot.getChildren()) {\r\n                    cardCar = child.getValue(CardCar.class);\r\n                    searchMatch(area, price, \"\" + editTextStartdate.getText().toString(),\r\n                            \"\" + editTextEndData.getText().toString(), cardCar);\r\n                }\r\n                if (arrayListCards2.size() > 0) {\r\n                    if (cardCarAdapter != null) cardCarAdapter.clear();\r\n\r\n                    // Toast.makeText(MainActivityPageUser.this, \"\"+registerInformation.getCardsUser().get(0).getImageViewArrayListName().get(0), Toast.LENGTH_LONG).show();\r\n                    buttonSeeAll.setVisibility(View.VISIBLE);\r\n                    toyAdapter1 = new CardCarAdapter(MainActivity.this, 0, 0, arrayListCards2);\r\n                    //phase 4 reference to listview\r\n                    lv11 = (ListView) findViewById(R.id.lvMange);\r\n                    lv11.setAdapter(toyAdapter1);\r\n\r\n                    lv11.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                        @Override\r\n                        public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {\r\n                            Intent intent = new Intent(MainActivity.this, MainActivityRegisterCar.class);\r\n                            intent.putExtra(\"flagMain\", true);\r\n                            pass(intent, arrayListCards2.get(i));\r\n\r\n\r\n                            startActivityForResult(intent, 0);\r\n                        }\r\n                    });\r\n                } else textViewWarnSearch.setVisibility(View.VISIBLE);\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n        progressDialog.dismiss();\r\n    }\r\n\r\n    private void searchMatch(String area, String price, String startDate, String endDate, CardCar card) {\r\n\r\n\r\n        if (area.equals(card.getArea())) {\r\n\r\n            if (dateMatch(card, startDate, endDate)) {\r\n\r\n                String priceCardString = card.getPriceDay();\r\n                int priceCard = Integer.valueOf(priceCardString);\r\n                if (price.equals(\"50-150\")) {\r\n                    if (priceCard >= 50 && priceCard < 150) arrayListCards2.add(card);\r\n                } else if (price.equals(\"150-250\")) {\r\n                    if (priceCard >= 150 && priceCard < 250) arrayListCards2.add(card);\r\n                } else if (price.equals(\"250-350\")) {\r\n                    if (priceCard >= 250 && priceCard < 350) arrayListCards2.add(card);\r\n                } else if (price.equals(\"350-450\")) {\r\n                    if (priceCard >= 350 && priceCard < 450)\r\n                        arrayListCards2.add(card);\r\n                } else if (price.equals(\"450-550\")) {\r\n                    if (priceCard >= 450 && priceCard < 550)\r\n                        arrayListCards2.add(card);\r\n                } else if (price.equals(\"550+\")) {\r\n                    if (priceCard >= 550) arrayListCards2.add(card);\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private boolean dateMatch(CardCar card, String startDate, String endDate) {\r\n        return true;\r\n    }\r\n\r\n    private void viewCards() {\r\n        progressDialog.setMessage(\"טוען כרטיסים...\");\r\n        progressDialog.show();\r\n        textViewWarnSearch.setVisibility(View.GONE);\r\n\r\n        cardRef2 = FirebaseDatabase.getInstance().getReference(\"CardsApprov\");\r\n        //   Toast.makeText(MainActivityPageUser.this, email, Toast.LENGTH_LONG).show();\r\n        // textViewTitle.setText(\"jjjjj\");\r\n\r\n        cardRef2.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                arrayListCards = new ArrayList();\r\n                CardCar card;\r\n                int i = 0;\r\n                for (DataSnapshot child : dataSnapshot.getChildren()) {\r\n                    i++;\r\n                    if (i > 30) break;\r\n                    card = child.getValue(CardCar.class);\r\n                    arrayListCards.add(card);\r\n                }\r\n                if (arrayListCards.size() > 0) {\r\n                    // Toast.makeText(MainActivityPageUser.this, \"\"+registerInformation.getCardsUser().get(0).getImageViewArrayListName().get(0), Toast.LENGTH_LONG).show();\r\n                    buttonSeeAll.setVisibility(View.GONE);\r\n\r\n                    cardCarAdapter = new CardCarAdapter(MainActivity.this, 0, 0, arrayListCards);\r\n                    //phase 4 reference to listview\r\n                    lv1 = (ListView) findViewById(R.id.lvMange);\r\n                    lv1.setAdapter(cardCarAdapter);\r\n\r\n                    lv1.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                        @Override\r\n                        public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {\r\n                            Intent intent = new Intent(MainActivity.this, MainActivityRegisterCar.class);\r\n                            intent.putExtra(\"flagMain\", true);\r\n                            pass(intent, arrayListCards.get(i));\r\n                            startActivityForResult(intent, 0);\r\n                        }\r\n                    });\r\n                }\r\n                progressDialog.dismiss();\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n    private void setLists() {\r\n        areaList.add(\"בחר אזור\");\r\n        areaList.add(\"צפון\");\r\n        areaList.add(\"מרכז\");\r\n        areaList.add(\"דרום\");\r\n\r\n        priceList.add(\"טווח מחיר\");\r\n        priceList.add(\"50-150\");\r\n        priceList.add(\"150-250\");\r\n        priceList.add(\"250-350\");\r\n        priceList.add(\"350-450\");\r\n        priceList.add(\"450-550\");\r\n        priceList.add(\"550+\");\r\n    }\r\n\r\n\r\n    public void setSpinerArea() {\r\n        priceSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                price = priceList.get(i);\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n        areaSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                area = areaList.get(i);\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void pass(Intent intent, CardCar cardCar) {\r\n        intent.putExtra(\"flag\", true);\r\n        intent.putExtra(\"name\", cardCar.getName());\r\n        intent.putExtra(\"typeCar\", cardCar.getTypeCar());\r\n        intent.putExtra(\"area\", cardCar.getArea());\r\n        intent.putExtra(\"city\", cardCar.getCity());\r\n        intent.putExtra(\"dateEnd\", cardCar.getDateEnd());\r\n        intent.putExtra(\"dateStart\", cardCar.getDateStart());\r\n        intent.putExtra(\"id\", cardCar.getId());\r\n        intent.putExtra(\"insurance\", cardCar.getInsurance());\r\n        intent.putExtra(\"numImage\", cardCar.getImageViewArrayListName().size());\r\n        intent.putExtra(\"permissionToPublish\", cardCar.getPermissionToPublish());\r\n        intent.putExtra(\"phone\", cardCar.getPhone());\r\n        intent.putExtra(\"priceDay\", cardCar.getPriceDay());\r\n        intent.putExtra(\"remarks\", cardCar.getRemarks());\r\n        intent.putExtra(\"yearCar\", cardCar.getYearCar());\r\n        for (int i = 1; i <= cardCar.getImageViewArrayListName().size(); i++) {\r\n            intent.putExtra(\"image\" + i, cardCar.getImageViewArrayListName().get(i - 1));\r\n        }\r\n\r\n\r\n    }\r\n    private void dialod() {\r\n        d = new Dialog(this);\r\n        d.setContentView(R.layout.login);\r\n        d.setTitle(\"Login\");\r\n\r\n        d.setCancelable(true);\r\n        checkBox = (CheckBox) d.findViewById(R.id.checkBoxPhone);\r\n        if (checkBox.isChecked()) {\r\n           // checkBox.setChecked(false);\r\n        }\r\n\r\n        editTextEmail = (EditText) d.findViewById(R.id.loginEmail);\r\n        editTextPassword = (EditText) d.findViewById(R.id.loginPassword);\r\n        loginButtonIn = (Button) d.findViewById(R.id.loginButton2);\r\n        checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            @Override\r\n            public void onCheckedChanged(CompoundButton compoundButton, boolean isChecked) {\r\n                if (isChecked) {\r\n                    editTextEmail.setText(\"\");\r\n                    editTextEmail.setInputType(3);\r\n                    editTextEmail.setHint(\"פלאפון\");\r\n                    editTextPassword.setVisibility(View.GONE);\r\n                    editTextPassword.setText(\"\");\r\n                } else {\r\n                    editTextEmail.setText(\"\");\r\n                    editTextPassword.setText(\"\");\r\n                    editTextEmail.setInputType(1);\r\n                    editTextEmail.setHint(\"אימייל\");\r\n                    editTextPassword.setVisibility(View.VISIBLE);\r\n                }\r\n            }\r\n        });\r\n        loginButtonIn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n\r\n                if (!checkBox.isChecked())\r\n                    loginIn();\r\n                else {\r\n                    if (flagCode) {\r\n                        String code = editTextPassword.getText().toString().trim();\r\n                        if (code.isEmpty() || code.length() < 6) {\r\n                            editTextPassword.setError(\"Enter valid code\");\r\n                            editTextPassword.requestFocus();\r\n                            return;\r\n                        } else\r\n                            verifyVerificationCode(code);\r\n                    } else {\r\n\r\n                        mobile = editTextEmail.getText().toString().trim();\r\n                        if (mobile.isEmpty() || mobile.length() < 10) {\r\n                            editTextEmail.setError(\"Enter a valid mobile\");\r\n                            editTextEmail.requestFocus();\r\n                            return;\r\n                        } else {\r\n                            flagCode = true;\r\n                            mobile = mobile;\r\n\r\n                            sendVerificationCode(mobile);\r\n                            editTextPassword.setVisibility(View.VISIBLE);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        d.show();\r\n\r\n    }\r\n\r\n    private void loginIn() {\r\n//        progressDialog.setMessage(\"Registering Please Wait...\");\r\n//        progressDialog.show();\r\n        String emailLogin = editTextEmail.getText().toString();\r\n        if (ErrWarn.errEmail(emailLogin)) {\r\n            textViewWarnEmail.setText(\"אימייל לא תקין\");\r\n            textViewWarnEmail.setVisibility(View.VISIBLE);\r\n        }\r\n        String passwordLogin = \"\";\r\n        passwordLogin = editTextPassword.getText().toString();\r\n        if (passwordLogin.length() == 0) {\r\n            textViewWarnPassword.setText(\"סיסמא לא תקינה\");\r\n            textViewWarnPassword.setVisibility(View.VISIBLE);\r\n        } else {\r\n\r\n            mAuth.signInWithEmailAndPassword(emailLogin, passwordLogin)\r\n                    .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                        @Override\r\n                        public void onComplete(@NonNull Task<AuthResult> task) {\r\n                            if (task.isSuccessful()) {\r\n                                Toast.makeText(MainActivity.this, \"הכניסה הצליחה\", Toast.LENGTH_SHORT).show();\r\n                                loginButtonMain.setText(\"יציאה\");\r\n                                Intent intent = new Intent(MainActivity.this, MainActivityPageUser.class);\r\n                                startActivity(intent);\r\n                                d.dismiss();\r\n                            } else {\r\n                                textViewWarnAll.setText(\"אימייל או סיסמא שגויים\");\r\n                                textViewWarnAll.setVisibility(View.VISIBLE);\r\n                                Toast.makeText(MainActivity.this, \"הכניסה נכשלה\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                            // progressDialog.dismiss();\r\n                        }\r\n                    });\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    private void setmCallBacks() {\r\n        mCallBacks = new PhoneAuthProvider.OnVerificationStateChangedCallbacks() {\r\n            @Override\r\n            public void onVerificationCompleted(PhoneAuthCredential phoneAuthCredential) {\r\n                //Getting the code sent by SMS\r\n                String code = phoneAuthCredential.getSmsCode();\r\n\r\n                //sometime the code is not detected automatically\r\n                //in this case the code will be null\r\n                //so user has to manually enter the code\r\n                if (code != null) {\r\n                    editTextPassword.setText(code);\r\n                    //verifying the code\r\n                    verifyVerificationCode(code);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onVerificationFailed(FirebaseException e) {\r\n                Toast.makeText(MainActivity.this, e.getMessage(), Toast.LENGTH_LONG).show();\r\n            }\r\n\r\n            @Override\r\n            public void onCodeSent(String s, PhoneAuthProvider.ForceResendingToken forceResendingToken) {\r\n                super.onCodeSent(s, forceResendingToken);\r\n                mVerificationId = s;\r\n\r\n\r\n                //  mResendToken = forceResendingToken;\r\n            }\r\n        };\r\n    }\r\n\r\n    private void verifyVerificationCode(String code) {\r\n        PhoneAuthCredential credential;\r\n        //creating the credential\r\n        Toast.makeText(MainActivity.this, mVerificationId, Toast.LENGTH_LONG).show();\r\n      // editTextEmail.setText(mVerificationId);\r\n      try{\r\n           credential = PhoneAuthProvider.getCredential(mVerificationId, code);\r\n      }\r\n      catch (RuntimeException e){\r\n          editTextPassword.setError(\"משו השתבש לחץ כניסה שוב\");\r\n          editTextPassword.requestFocus();\r\n       return;\r\n\r\n      }\r\n\r\n        //signing the user\r\n      signInWithPhoneAuthCredential(credential);\r\n    }\r\n\r\n    private void signInWithPhoneAuthCredential(PhoneAuthCredential credential) {\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(MainActivity.this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            registerInformation = null;\r\n                            mobile = mobile.substring(1);\r\n                            DatabaseReference ref3 = FirebaseDatabase.getInstance().getReference(\"RegisterInformation\");\r\n                            ref3.orderByChild(\"email\").equalTo(\"+972\" + mobile).addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                @Override\r\n                                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                for (DataSnapshot child : snapshot.getChildren()) {\r\n\r\n                                        registerInformation = child.getValue(RegisterInformation.class);\r\n                                    }\r\n                                    if (!snapshot.exists()) {\r\n\r\n                                        registerInformation = new RegisterInformation();\r\n                                        registerInformation.setEmail(\"+972\" + mobile);\r\n                                        saveRegisterDataFireBase();\r\n                                    }\r\n                                    else {\r\n                                       d.dismiss();\r\n                                        Intent intent = new Intent(MainActivity.this, MainActivityPageUser.class);\r\n\r\n                                        startActivity(intent);\r\n\r\n\r\n                                    }\r\n\r\n\r\n                                }\r\n\r\n                                @Override\r\n                                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                }\r\n                            });\r\n\r\n\r\n                            //verification successful we will start the profile activity\r\n\r\n\r\n                        } else {\r\n\r\n                            //verification unsuccessful.. display an error message\r\n\r\n                            editTextPassword.setError(\"Enter valid code\");\r\n                            editTextPassword.requestFocus();\r\n\r\n                            return;\r\n\r\n\r\n//                            Snackbar snackbar = Snackbar.make(findViewById(R.id.parent), message, Snackbar.LENGTH_LONG);\r\n//                            snackbar.setAction(\"Dismiss\", new View.OnClickListener() {\r\n//                                @Override\r\n//                                public void onClick(View v) {\r\n//\r\n//                                }\r\n//                            });\r\n//                            snackbar.show();\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void saveRegisterDataFireBase() {\r\n\r\n\r\n        DatabaseReference cardRef4 = FirebaseDatabase.getInstance().getReference(\"RegisterInformation\").push();\r\n\r\n\r\n        cardRef4.setValue(registerInformation);\r\n        d.dismiss();\r\n        Toast.makeText(MainActivity.this, \"הייתי פה\", Toast.LENGTH_SHORT).show();\r\n        Intent intent = new Intent(MainActivity.this, MainActivityPageUser.class);\r\n\r\n        startActivity(intent);\r\n    }\r\n\r\n    private void sendVerificationCode(String mobile) {\r\n        PhoneAuthOptions options = PhoneAuthOptions.newBuilder(mAuth)\r\n                .setPhoneNumber(\"+972\" + mobile)\r\n                .setTimeout(60L, TimeUnit.SECONDS)\r\n                .setActivity(MainActivity.this)\r\n                .setCallbacks(mCallBacks)\r\n                .build();\r\n        PhoneAuthProvider.verifyPhoneNumber(options);\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/rentit/MainActivity.java	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ app/src/main/java/com/example/rentit/MainActivity.java	(date 1607562830000)
@@ -47,7 +47,6 @@
     private String mobile;
     private String mVerificationId;
     private Boolean flagCode = false;
-int x;
     private Dialog d;
     private EditText editTextEmail, editTextPassword;
     private EditText editTextStartdate, editTextEndData;
@@ -63,10 +62,8 @@
     private DatabaseReference cardRef;
 
     private TextView textViewWarnEmail, textViewWarnPassword, textViewWarnAll, textVieeTittel;
-int y;
 
     private RegisterInformation registerInformation;
-    private RegisterInformation registerInformation1;
 
     private CardCarAdapter cardCarAdapter = null;
     private ListView lv1;
@@ -144,8 +141,6 @@
                     Intent intent = new Intent(MainActivity.this, MainActivity.class);
                     startActivity(intent);
 
-//                    loginButtonMain.setText("כניסה");
-//                    registerButton.setText("הרשמה");
 
                 } else
                     dialod();
@@ -201,11 +196,10 @@
                 }
                 if (arrayListCards2.size() > 0) {
                     if (cardCarAdapter != null) cardCarAdapter.clear();
+                    //phase 4 reference to listview
 
-                    // Toast.makeText(MainActivityPageUser.this, ""+registerInformation.getCardsUser().get(0).getImageViewArrayListName().get(0), Toast.LENGTH_LONG).show();
                     buttonSeeAll.setVisibility(View.VISIBLE);
                     toyAdapter1 = new CardCarAdapter(MainActivity.this, 0, 0, arrayListCards2);
-                    //phase 4 reference to listview
                     lv11 = (ListView) findViewById(R.id.lvMange);
                     lv11.setAdapter(toyAdapter1);
 
@@ -221,6 +215,7 @@
                         }
                     });
                 } else textViewWarnSearch.setVisibility(View.VISIBLE);
+                progressDialog.dismiss();
 
 
             }
@@ -230,7 +225,6 @@
 
             }
         });
-        progressDialog.dismiss();
     }
 
     private void searchMatch(String area, String price, String startDate, String endDate, CardCar card) {
@@ -273,8 +267,6 @@
         textViewWarnSearch.setVisibility(View.GONE);
 
         cardRef2 = FirebaseDatabase.getInstance().getReference("CardsApprov");
-        //   Toast.makeText(MainActivityPageUser.this, email, Toast.LENGTH_LONG).show();
-        // textViewTitle.setText("jjjjj");
 
         cardRef2.addListenerForSingleValueEvent(new ValueEventListener() {
             @Override
@@ -365,7 +357,7 @@
     }
 
     private void pass(Intent intent, CardCar cardCar) {
-        intent.putExtra("flag", true);
+        intent.putExtra("flagEdit", true);
         intent.putExtra("name", cardCar.getName());
         intent.putExtra("typeCar", cardCar.getTypeCar());
         intent.putExtra("area", cardCar.getArea());
@@ -374,12 +366,16 @@
         intent.putExtra("dateStart", cardCar.getDateStart());
         intent.putExtra("id", cardCar.getId());
         intent.putExtra("insurance", cardCar.getInsurance());
-        intent.putExtra("numImage", cardCar.getImageViewArrayListName().size());
+        intent.putExtra("numImage", cardCar.getNumImage());
         intent.putExtra("permissionToPublish", cardCar.getPermissionToPublish());
         intent.putExtra("phone", cardCar.getPhone());
         intent.putExtra("priceDay", cardCar.getPriceDay());
         intent.putExtra("remarks", cardCar.getRemarks());
         intent.putExtra("yearCar", cardCar.getYearCar());
+        intent.putExtra("email", cardCar.getEmail());
+        intent.putExtra("key", cardCar.getKey());
+        intent.putExtra("rejection", cardCar.getRejection());
+
         for (int i = 1; i <= cardCar.getImageViewArrayListName().size(); i++) {
             intent.putExtra("image" + i, cardCar.getImageViewArrayListName().get(i - 1));
         }
@@ -393,9 +389,9 @@
 
         d.setCancelable(true);
         checkBox = (CheckBox) d.findViewById(R.id.checkBoxPhone);
-        if (checkBox.isChecked()) {
-           // checkBox.setChecked(false);
-        }
+//        if (checkBox.isChecked()) {
+//           // checkBox.setChecked(false);
+//        }
 
         editTextEmail = (EditText) d.findViewById(R.id.loginEmail);
         editTextPassword = (EditText) d.findViewById(R.id.loginPassword);
@@ -443,7 +439,7 @@
                             return;
                         } else {
                             flagCode = true;
-                            mobile = mobile;
+
 
                             sendVerificationCode(mobile);
                             editTextPassword.setVisibility(View.VISIBLE);
@@ -505,7 +501,6 @@
             public void onVerificationCompleted(PhoneAuthCredential phoneAuthCredential) {
                 //Getting the code sent by SMS
                 String code = phoneAuthCredential.getSmsCode();
-
                 //sometime the code is not detected automatically
                 //in this case the code will be null
                 //so user has to manually enter the code
@@ -525,9 +520,6 @@
             public void onCodeSent(String s, PhoneAuthProvider.ForceResendingToken forceResendingToken) {
                 super.onCodeSent(s, forceResendingToken);
                 mVerificationId = s;
-
-
-                //  mResendToken = forceResendingToken;
             }
         };
     }
@@ -578,13 +570,8 @@
                                     else {
                                        d.dismiss();
                                         Intent intent = new Intent(MainActivity.this, MainActivityPageUser.class);
-
                                         startActivity(intent);
-
-
                                     }
-
-
                                 }
 
                                 @Override
@@ -593,10 +580,6 @@
                                 }
                             });
 
-
-                            //verification successful we will start the profile activity
-
-
                         } else {
 
                             //verification unsuccessful.. display an error message
@@ -606,15 +589,6 @@
 
                             return;
 
-
-//                            Snackbar snackbar = Snackbar.make(findViewById(R.id.parent), message, Snackbar.LENGTH_LONG);
-//                            snackbar.setAction("Dismiss", new View.OnClickListener() {
-//                                @Override
-//                                public void onClick(View v) {
-//
-//                                }
-//                            });
-//                            snackbar.show();
                         }
                     }
                 });
@@ -622,15 +596,11 @@
 
     private void saveRegisterDataFireBase() {
 
-
         DatabaseReference cardRef4 = FirebaseDatabase.getInstance().getReference("RegisterInformation").push();
-
-
         cardRef4.setValue(registerInformation);
         d.dismiss();
         Toast.makeText(MainActivity.this, "הייתי פה", Toast.LENGTH_SHORT).show();
         Intent intent = new Intent(MainActivity.this, MainActivityPageUser.class);
-
         startActivity(intent);
     }
 
Index: app/src/main/java/com/example/rentit/MainActivityRegister.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.rentit;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.app.Dialog;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.gms.tasks.TaskExecutors;\r\nimport com.google.android.material.snackbar.Snackbar;\r\nimport com.google.firebase.FirebaseException;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseAuthInvalidCredentialsException;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.PhoneAuthCredential;\r\nimport com.google.firebase.auth.PhoneAuthOptions;\r\nimport com.google.firebase.auth.PhoneAuthProvider;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.List;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class MainActivityRegister extends AppCompatActivity {\r\n    private FirebaseDatabase database;\r\n    private DatabaseReference cardRef;\r\n    private TextView textViewWarnEmail, textViewWarnPassword1, textViewWarnPassword2, textViewWarnAll;\r\n    private FirebaseAuth mAuth;\r\n    private RegisterInformation registerInformation = null;\r\n    private Button  loginButtonIn;\r\n    private Button registerButton, buttonPhone, buttonSmsCode;\r\n    private Button returnButton;\r\n    private EditText editTextEmail, editTextPhone, editTextSmsCode;\r\n    private EditText editTextPass1;\r\n    private EditText editTextPass2;\r\n    private String mVerificationId;\r\n    private PhoneAuthProvider.OnVerificationStateChangedCallbacks mCallBacks;\r\n    private String mobile;\r\n\r\n    private CheckBox checkBox;\r\n\r\n    private Boolean flagCode = false;\r\n\r\n    private Dialog d;\r\n    private EditText  editTextPassword;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main_register);\r\n        mAuth = FirebaseAuth.getInstance();\r\n        database = FirebaseDatabase.getInstance();\r\n        setmCallBacks();\r\n\r\n\r\n        textViewWarnEmail = findViewById(R.id.textWarnEmail);\r\n        textViewWarnPassword1 = findViewById(R.id.textWarnPassword1);\r\n        textViewWarnPassword2 = findViewById(R.id.textWarnPassword2);\r\n        textViewWarnAll = findViewById(R.id.textWarnAll);\r\n\r\n        registerButton = findViewById(R.id.register);\r\n        buttonSmsCode = findViewById(R.id.buttonCodeGo);\r\n        buttonPhone = findViewById(R.id.buttonRegisterPhone);\r\n        returnButton = findViewById(R.id.mainPage);\r\n        editTextSmsCode = findViewById(R.id.editTextSmsCode);\r\n        editTextPhone = findViewById(R.id.editTextPhone);\r\n        editTextEmail = findViewById(R.id.email);\r\n        editTextPass1 = findViewById(R.id.editTextTextPassword);\r\n        editTextPass2 = findViewById(R.id.password2);\r\n        buttonPhone.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialod();\r\n//                mobile = editTextPhone.getText().toString().trim();\r\n//\r\n//                if (mobile.isEmpty() || mobile.length() < 10) {\r\n//                    editTextPhone.setError(\"Enter a valid mobile\");\r\n//                    editTextPhone.requestFocus();\r\n//                    return;\r\n//                } else {\r\n//                    mobile = mobile;\r\n////                    Intent intent = new Intent(MainActivityRegister.this, MainActivityPhone.class);\r\n////                    intent.putExtra(\"num\", mobile);\r\n////                    startActivityForResult(intent, 0);\r\n//                    sendVerificationCode(mobile);\r\n//                    editTextSmsCode.setVisibility(View.VISIBLE);\r\n//                    buttonSmsCode.setVisibility(View.VISIBLE);\r\n\r\n\r\n              //  }\r\n            }\r\n        });\r\n\r\n        buttonSmsCode.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String code = editTextSmsCode.getText().toString().trim();\r\n                if (code.isEmpty() || code.length() < 6) {\r\n                    editTextSmsCode.setError(\"Enter valid code\");\r\n                    editTextSmsCode.requestFocus();\r\n                    return;\r\n                }\r\n                verifyVerificationCode(code);\r\n\r\n            }\r\n        });\r\n\r\n        registerButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                register();\r\n\r\n                //   saveRegisterDataFireBase();\r\n            }\r\n        });\r\n        returnButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(MainActivityRegister.this, MainActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void setmCallBacks1() {\r\n        mCallBacks = new PhoneAuthProvider.OnVerificationStateChangedCallbacks() {\r\n            @Override\r\n            public void onVerificationCompleted(PhoneAuthCredential phoneAuthCredential) {\r\n                //Getting the code sent by SMS\r\n                String code = phoneAuthCredential.getSmsCode();\r\n\r\n                //sometime the code is not detected automatically\r\n                //in this case the code will be null\r\n                //so user has to manually enter the code\r\n                if (code != null) {\r\n                    editTextSmsCode.setText(code);\r\n                    //verifying the code\r\n                    verifyVerificationCode(code);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onVerificationFailed(FirebaseException e) {\r\n                Toast.makeText(MainActivityRegister.this, e.getMessage(), Toast.LENGTH_LONG).show();\r\n            }\r\n\r\n            @Override\r\n            public void onCodeSent(String s, PhoneAuthProvider.ForceResendingToken forceResendingToken) {\r\n                super.onCodeSent(s, forceResendingToken);\r\n                mVerificationId = s;\r\n\r\n\r\n                //  mResendToken = forceResendingToken;\r\n            }\r\n        };\r\n    }\r\n\r\n    private void saveRegisterDataFireBaseEmail() {\r\n\r\n\r\n        cardRef = database.getReference(\"RegisterInformation\").push();\r\n\r\n\r\n        cardRef.setValue(registerInformation);\r\n\r\n        Toast.makeText(MainActivityRegister.this, \"הייתי פה\", Toast.LENGTH_SHORT).show();\r\n        Intent intent = new Intent(MainActivityRegister.this, MainActivityPageUser.class);\r\n        startActivity(intent);\r\n    }\r\n\r\n\r\n    private void registerFirebase(String email, String password) {\r\n        final String TAG = \"tag\";\r\n        Toast.makeText(MainActivityRegister.this, email, Toast.LENGTH_SHORT).show();\r\n\r\n        mAuth.createUserWithEmailAndPassword(email, password)\r\n                .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            // Sign in success, update UI with the signed-in user's information\r\n                            Log.d(TAG, \"createUserWithEmail:success\");\r\n                            saveRegisterDataFireBaseEmail();\r\n                        } else {\r\n                            textViewWarnAll.setText(\"אימייל או סיסמא לא תקינים\");\r\n                            textViewWarnAll.setVisibility(View.VISIBLE);\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\n    public void register() {\r\n        textViewWarnPassword2.setVisibility(View.GONE);\r\n        textViewWarnPassword1.setVisibility(View.GONE);\r\n        textViewWarnAll.setVisibility(View.GONE);\r\n        textViewWarnEmail.setVisibility(View.GONE);\r\n\r\n        String email = editTextEmail.getText().toString();\r\n        if (ErrWarn.errEmail(email)) {\r\n            textViewWarnEmail.setText(\"אימייל לא קיים\");\r\n            textViewWarnEmail.setVisibility(View.VISIBLE);\r\n        } else {\r\n            String pass1 = \"\" + editTextPass1.getText().toString();\r\n            if (pass1.length() < 6) {\r\n                textViewWarnPassword1.setText(\"סיסמא קצרה מדי, לפחות 6 תווים\");\r\n                textViewWarnPassword1.setVisibility(View.VISIBLE);\r\n            } else {\r\n                String pass2 = editTextPass2.getText().toString();\r\n                if (pass1.equals(pass2)) {\r\n\r\n                    registerInformation = new RegisterInformation();\r\n                    registerInformation.setEmail(email);\r\n                    registerInformation.setPassword(pass1);\r\n                    registerFirebase(email, pass1);\r\n\r\n\r\n                } else {\r\n                    textViewWarnPassword2.setText(\"סיסמא לא תואמת\");\r\n                    textViewWarnPassword2.setVisibility(View.VISIBLE);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private void sendVerificationCode1(String mobile) {\r\n        PhoneAuthOptions options = PhoneAuthOptions.newBuilder(mAuth)\r\n                .setPhoneNumber(\"+972\" + mobile)\r\n                .setTimeout(60L, TimeUnit.SECONDS)\r\n                .setActivity(MainActivityRegister.this)\r\n                .setCallbacks(mCallBacks)\r\n                .build();\r\n        PhoneAuthProvider.verifyPhoneNumber(options);\r\n    }\r\n\r\n\r\n    private void verifyVerificationCode1(String code) {\r\n        //creating the credential\r\n        PhoneAuthCredential credential = PhoneAuthProvider.getCredential(mVerificationId, code);\r\n\r\n        //signing the user\r\n        signInWithPhoneAuthCredential1(credential);\r\n    }\r\n\r\n    private void signInWithPhoneAuthCredential1(PhoneAuthCredential credential) {\r\n\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(MainActivityRegister.this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            mobile = mobile.substring(1);\r\n                            DatabaseReference ref3 = FirebaseDatabase.getInstance().getReference(\"RegisterInformation\");\r\n                            ref3.orderByChild(\"email\").equalTo(\"+972\" + mobile).addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                @Override\r\n                                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                    // Toast.makeText(MainActivityRegisterCar.this, snapshot.toString(), Toast.LENGTH_LONG).show();\r\n                                    for (DataSnapshot child : snapshot.getChildren()) {\r\n                                        registerInformation = child.getValue(RegisterInformation.class);\r\n                                    }\r\n                                    if (registerInformation == null) {\r\n                                        registerInformation = new RegisterInformation();\r\n                                        registerInformation.setEmail(\"+972\" + mobile);\r\n                                        saveRegisterDataFireBase();\r\n                                    } else {\r\n                                        Intent intent = new Intent(MainActivityRegister.this, MainActivityPageUser.class);\r\n                                        startActivity(intent);\r\n\r\n\r\n                                    }\r\n\r\n\r\n                                }\r\n\r\n                                @Override\r\n                                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                }\r\n                            });\r\n\r\n\r\n                            //verification successful we will start the profile activity\r\n\r\n\r\n                        } else {\r\n\r\n                            //verification unsuccessful.. display an error message\r\n\r\n                            String message = \"Somthing is wrong, we will fix it soon...\";\r\n\r\n                            if (task.getException() instanceof FirebaseAuthInvalidCredentialsException) {\r\n                                message = \"Invalid code entered...\";\r\n                            }\r\n\r\n//                            Snackbar snackbar = Snackbar.make(findViewById(R.id.parent), message, Snackbar.LENGTH_LONG);\r\n//                            snackbar.setAction(\"Dismiss\", new View.OnClickListener() {\r\n//                                @Override\r\n//                                public void onClick(View v) {\r\n//\r\n//                                }\r\n//                            });\r\n//                            snackbar.show();\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n    private void dialod() {\r\n\r\n        d = new Dialog(this);\r\n        d.setContentView(R.layout.login);\r\n        d.setTitle(\"Login\");\r\n\r\n        d.setCancelable(true);\r\n        checkBox = (CheckBox) d.findViewById(R.id.checkBoxPhone);\r\n\r\n             checkBox.setChecked(true);\r\n\r\n\r\n        editTextEmail = (EditText) d.findViewById(R.id.loginEmail);\r\n        editTextPassword = (EditText) d.findViewById(R.id.loginPassword);\r\n        loginButtonIn = (Button) d.findViewById(R.id.loginButton2);\r\n        editTextEmail.setText(\"\");\r\n        editTextEmail.setInputType(3);\r\n        editTextEmail.setHint(\"פלאפון\");\r\n        editTextPassword.setVisibility(View.GONE);\r\n        editTextPassword.setText(\"\");\r\n        checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            @Override\r\n            public void onCheckedChanged(CompoundButton compoundButton, boolean isChecked) {\r\n\r\n            }\r\n        });\r\n        loginButtonIn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n\r\n\r\n                    if (flagCode) {\r\n                        String code = editTextPassword.getText().toString().trim();\r\n                        if (code.isEmpty() || code.length() < 6) {\r\n                            editTextPassword.setError(\"Enter valid code\");\r\n                            editTextPassword.requestFocus();\r\n                            return;\r\n                        } else\r\n                            verifyVerificationCode(code);\r\n                    } else {\r\n\r\n                        mobile = editTextEmail.getText().toString().trim();\r\n                        if (mobile.isEmpty() || mobile.length() < 10) {\r\n                            editTextEmail.setError(\"Enter a valid mobile\");\r\n                            editTextEmail.requestFocus();\r\n                            return;\r\n                        } else {\r\n                            mobile = mobile;\r\n\r\n                            sendVerificationCode(mobile);\r\n                            editTextPassword.setVisibility(View.VISIBLE);\r\n                        }\r\n                    }\r\n                }\r\n\r\n        });\r\n        d.show();\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    private void setmCallBacks() {\r\n        mCallBacks = new PhoneAuthProvider.OnVerificationStateChangedCallbacks() {\r\n            @Override\r\n            public void onVerificationCompleted(PhoneAuthCredential phoneAuthCredential) {\r\n                //Getting the code sent by SMS\r\n                String code = phoneAuthCredential.getSmsCode();\r\n\r\n                //sometime the code is not detected automatically\r\n                //in this case the code will be null\r\n                //so user has to manually enter the code\r\n                if (code != null) {\r\n                    editTextPassword.setText(code);\r\n                    //verifying the code\r\n                    verifyVerificationCode(code);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onVerificationFailed(FirebaseException e) {\r\n                Toast.makeText(MainActivityRegister.this, e.getMessage(), Toast.LENGTH_LONG).show();\r\n            }\r\n\r\n            @Override\r\n            public void onCodeSent(String s, PhoneAuthProvider.ForceResendingToken forceResendingToken) {\r\n                super.onCodeSent(s, forceResendingToken);\r\n                flagCode = true;\r\n                mVerificationId = s;\r\n\r\n\r\n                //  mResendToken = forceResendingToken;\r\n            }\r\n        };\r\n    }\r\n\r\n    private void verifyVerificationCode(String code) {\r\n\r\n        //creating the credential\r\n        PhoneAuthCredential credential = PhoneAuthProvider.getCredential(mVerificationId, code);\r\n\r\n        //signing the user\r\n        signInWithPhoneAuthCredential(credential);\r\n    }\r\n\r\n    private void signInWithPhoneAuthCredential(PhoneAuthCredential credential) {\r\n\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(MainActivityRegister.this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            registerInformation = null;\r\n                            mobile = mobile.substring(1);\r\n                            DatabaseReference ref3 = FirebaseDatabase.getInstance().getReference(\"RegisterInformation\");\r\n                            ref3.orderByChild(\"email\").equalTo(\"+972\" + mobile).addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                @Override\r\n                                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                    for (DataSnapshot child : snapshot.getChildren()) {\r\n\r\n                                        registerInformation = child.getValue(RegisterInformation.class);\r\n                                    }\r\n                                    if (!snapshot.exists()) {\r\n\r\n                                        registerInformation = new RegisterInformation();\r\n                                        registerInformation.setEmail(\"+972\" + mobile);\r\n                                        saveRegisterDataFireBase();\r\n                                    }\r\n                                    else {\r\n                                        d.dismiss();\r\n                                        Intent intent = new Intent(MainActivityRegister.this, MainActivityPageUser.class);\r\n\r\n                                        startActivity(intent);\r\n\r\n\r\n                                    }\r\n\r\n\r\n                                }\r\n\r\n                                @Override\r\n                                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                }\r\n                            });\r\n\r\n\r\n                            //verification successful we will start the profile activity\r\n\r\n\r\n                        } else {\r\n\r\n                            //verification unsuccessful.. display an error message\r\n\r\n                            editTextPassword.setError(\"Enter valid code\");\r\n                            editTextPassword.requestFocus();\r\n\r\n                            return;\r\n\r\n\r\n//                            Snackbar snackbar = Snackbar.make(findViewById(R.id.parent), message, Snackbar.LENGTH_LONG);\r\n//                            snackbar.setAction(\"Dismiss\", new View.OnClickListener() {\r\n//                                @Override\r\n//                                public void onClick(View v) {\r\n//\r\n//                                }\r\n//                            });\r\n//                            snackbar.show();\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void saveRegisterDataFireBase() {\r\n\r\n\r\n        DatabaseReference cardRef4 = FirebaseDatabase.getInstance().getReference(\"RegisterInformation\").push();\r\n\r\n\r\n        cardRef4.setValue(registerInformation);\r\n        d.dismiss();\r\n        Toast.makeText(MainActivityRegister.this, \"הייתי פה\", Toast.LENGTH_SHORT).show();\r\n        Intent intent = new Intent(MainActivityRegister.this, MainActivityPageUser.class);\r\n\r\n        startActivity(intent);\r\n    }\r\n\r\n    private void sendVerificationCode(String mobile) {\r\n        PhoneAuthOptions options = PhoneAuthOptions.newBuilder(mAuth)\r\n                .setPhoneNumber(\"+972\" + mobile)\r\n                .setTimeout(60L, TimeUnit.SECONDS)\r\n                .setActivity(MainActivityRegister.this)\r\n                .setCallbacks(mCallBacks)\r\n                .build();\r\n        PhoneAuthProvider.verifyPhoneNumber(options);\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/rentit/MainActivityRegister.java	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ app/src/main/java/com/example/rentit/MainActivityRegister.java	(date 1607564872000)
@@ -3,7 +3,6 @@
 import androidx.annotation.NonNull;
 import androidx.appcompat.app.AppCompatActivity;
 
-import android.app.Activity;
 import android.app.Dialog;
 import android.content.Intent;
 import android.os.Bundle;
@@ -18,13 +17,10 @@
 
 import com.google.android.gms.tasks.OnCompleteListener;
 import com.google.android.gms.tasks.Task;
-import com.google.android.gms.tasks.TaskExecutors;
-import com.google.android.material.snackbar.Snackbar;
+
 import com.google.firebase.FirebaseException;
 import com.google.firebase.auth.AuthResult;
 import com.google.firebase.auth.FirebaseAuth;
-import com.google.firebase.auth.FirebaseAuthInvalidCredentialsException;
-import com.google.firebase.auth.FirebaseUser;
 import com.google.firebase.auth.PhoneAuthCredential;
 import com.google.firebase.auth.PhoneAuthOptions;
 import com.google.firebase.auth.PhoneAuthProvider;
@@ -34,7 +30,6 @@
 import com.google.firebase.database.FirebaseDatabase;
 import com.google.firebase.database.ValueEventListener;
 
-import java.util.List;
 import java.util.concurrent.TimeUnit;
 
 public class MainActivityRegister extends AppCompatActivity {
@@ -43,7 +38,7 @@
     private TextView textViewWarnEmail, textViewWarnPassword1, textViewWarnPassword2, textViewWarnAll;
     private FirebaseAuth mAuth;
     private RegisterInformation registerInformation = null;
-    private Button  loginButtonIn;
+    private Button loginButtonIn;
     private Button registerButton, buttonPhone, buttonSmsCode;
     private Button returnButton;
     private EditText editTextEmail, editTextPhone, editTextSmsCode;
@@ -58,7 +53,7 @@
     private Boolean flagCode = false;
 
     private Dialog d;
-    private EditText  editTextPassword;
+    private EditText editTextPassword;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -87,23 +82,6 @@
             @Override
             public void onClick(View view) {
                 dialod();
-//                mobile = editTextPhone.getText().toString().trim();
-//
-//                if (mobile.isEmpty() || mobile.length() < 10) {
-//                    editTextPhone.setError("Enter a valid mobile");
-//                    editTextPhone.requestFocus();
-//                    return;
-//                } else {
-//                    mobile = mobile;
-////                    Intent intent = new Intent(MainActivityRegister.this, MainActivityPhone.class);
-////                    intent.putExtra("num", mobile);
-////                    startActivityForResult(intent, 0);
-//                    sendVerificationCode(mobile);
-//                    editTextSmsCode.setVisibility(View.VISIBLE);
-//                    buttonSmsCode.setVisibility(View.VISIBLE);
-
-
-              //  }
             }
         });
 
@@ -125,8 +103,6 @@
             @Override
             public void onClick(View view) {
                 register();
-
-                //   saveRegisterDataFireBase();
             }
         });
         returnButton.setOnClickListener(new View.OnClickListener() {
@@ -140,48 +116,10 @@
 
     }
 
-    private void setmCallBacks1() {
-        mCallBacks = new PhoneAuthProvider.OnVerificationStateChangedCallbacks() {
-            @Override
-            public void onVerificationCompleted(PhoneAuthCredential phoneAuthCredential) {
-                //Getting the code sent by SMS
-                String code = phoneAuthCredential.getSmsCode();
-
-                //sometime the code is not detected automatically
-                //in this case the code will be null
-                //so user has to manually enter the code
-                if (code != null) {
-                    editTextSmsCode.setText(code);
-                    //verifying the code
-                    verifyVerificationCode(code);
-                }
-            }
-
-            @Override
-            public void onVerificationFailed(FirebaseException e) {
-                Toast.makeText(MainActivityRegister.this, e.getMessage(), Toast.LENGTH_LONG).show();
-            }
-
-            @Override
-            public void onCodeSent(String s, PhoneAuthProvider.ForceResendingToken forceResendingToken) {
-                super.onCodeSent(s, forceResendingToken);
-                mVerificationId = s;
-
-
-                //  mResendToken = forceResendingToken;
-            }
-        };
-    }
 
     private void saveRegisterDataFireBaseEmail() {
-
-
         cardRef = database.getReference("RegisterInformation").push();
-
-
         cardRef.setValue(registerInformation);
-
-        Toast.makeText(MainActivityRegister.this, "הייתי פה", Toast.LENGTH_SHORT).show();
         Intent intent = new Intent(MainActivityRegister.this, MainActivityPageUser.class);
         startActivity(intent);
     }
@@ -240,87 +178,8 @@
         }
     }
 
-    private void sendVerificationCode1(String mobile) {
-        PhoneAuthOptions options = PhoneAuthOptions.newBuilder(mAuth)
-                .setPhoneNumber("+972" + mobile)
-                .setTimeout(60L, TimeUnit.SECONDS)
-                .setActivity(MainActivityRegister.this)
-                .setCallbacks(mCallBacks)
-                .build();
-        PhoneAuthProvider.verifyPhoneNumber(options);
-    }
-
 
-    private void verifyVerificationCode1(String code) {
-        //creating the credential
-        PhoneAuthCredential credential = PhoneAuthProvider.getCredential(mVerificationId, code);
 
-        //signing the user
-        signInWithPhoneAuthCredential1(credential);
-    }
-
-    private void signInWithPhoneAuthCredential1(PhoneAuthCredential credential) {
-
-        mAuth.signInWithCredential(credential)
-                .addOnCompleteListener(MainActivityRegister.this, new OnCompleteListener<AuthResult>() {
-                    @Override
-                    public void onComplete(@NonNull Task<AuthResult> task) {
-                        if (task.isSuccessful()) {
-                            mobile = mobile.substring(1);
-                            DatabaseReference ref3 = FirebaseDatabase.getInstance().getReference("RegisterInformation");
-                            ref3.orderByChild("email").equalTo("+972" + mobile).addListenerForSingleValueEvent(new ValueEventListener() {
-                                @Override
-                                public void onDataChange(@NonNull DataSnapshot snapshot) {
-                                    // Toast.makeText(MainActivityRegisterCar.this, snapshot.toString(), Toast.LENGTH_LONG).show();
-                                    for (DataSnapshot child : snapshot.getChildren()) {
-                                        registerInformation = child.getValue(RegisterInformation.class);
-                                    }
-                                    if (registerInformation == null) {
-                                        registerInformation = new RegisterInformation();
-                                        registerInformation.setEmail("+972" + mobile);
-                                        saveRegisterDataFireBase();
-                                    } else {
-                                        Intent intent = new Intent(MainActivityRegister.this, MainActivityPageUser.class);
-                                        startActivity(intent);
-
-
-                                    }
-
-
-                                }
-
-                                @Override
-                                public void onCancelled(@NonNull DatabaseError error) {
-
-                                }
-                            });
-
-
-                            //verification successful we will start the profile activity
-
-
-                        } else {
-
-                            //verification unsuccessful.. display an error message
-
-                            String message = "Somthing is wrong, we will fix it soon...";
-
-                            if (task.getException() instanceof FirebaseAuthInvalidCredentialsException) {
-                                message = "Invalid code entered...";
-                            }
-
-//                            Snackbar snackbar = Snackbar.make(findViewById(R.id.parent), message, Snackbar.LENGTH_LONG);
-//                            snackbar.setAction("Dismiss", new View.OnClickListener() {
-//                                @Override
-//                                public void onClick(View v) {
-//
-//                                }
-//                            });
-//                            snackbar.show();
-                        }
-                    }
-                });
-    }
     private void dialod() {
 
         d = new Dialog(this);
@@ -330,7 +189,7 @@
         d.setCancelable(true);
         checkBox = (CheckBox) d.findViewById(R.id.checkBoxPhone);
 
-             checkBox.setChecked(true);
+        checkBox.setChecked(true);
 
 
         editTextEmail = (EditText) d.findViewById(R.id.loginEmail);
@@ -352,30 +211,29 @@
             public void onClick(View view) {
 
 
-
-                    if (flagCode) {
-                        String code = editTextPassword.getText().toString().trim();
-                        if (code.isEmpty() || code.length() < 6) {
-                            editTextPassword.setError("Enter valid code");
-                            editTextPassword.requestFocus();
-                            return;
-                        } else
-                            verifyVerificationCode(code);
-                    } else {
+                if (flagCode) {
+                    String code = editTextPassword.getText().toString().trim();
+                    if (code.isEmpty() || code.length() < 6) {
+                        editTextPassword.setError("Enter valid code");
+                        editTextPassword.requestFocus();
+                        return;
+                    } else
+                        verifyVerificationCode(code);
+                } else {
 
-                        mobile = editTextEmail.getText().toString().trim();
-                        if (mobile.isEmpty() || mobile.length() < 10) {
-                            editTextEmail.setError("Enter a valid mobile");
-                            editTextEmail.requestFocus();
-                            return;
-                        } else {
-                            mobile = mobile;
+                    mobile = editTextEmail.getText().toString().trim();
+                    if (mobile.isEmpty() || mobile.length() < 10) {
+                        editTextEmail.setError("Enter a valid mobile");
+                        editTextEmail.requestFocus();
+                        return;
+                    } else {
+                        mobile = mobile;
 
-                            sendVerificationCode(mobile);
-                            editTextPassword.setVisibility(View.VISIBLE);
-                        }
-                    }
-                }
+                        sendVerificationCode(mobile);
+                        editTextPassword.setVisibility(View.VISIBLE);
+                    }
+                }
+            }
 
         });
         d.show();
@@ -383,11 +241,6 @@
     }
 
 
-
-
-
-
-
     private void setmCallBacks() {
         mCallBacks = new PhoneAuthProvider.OnVerificationStateChangedCallbacks() {
             @Override
@@ -424,8 +277,18 @@
 
     private void verifyVerificationCode(String code) {
 
+        PhoneAuthCredential credential;
         //creating the credential
-        PhoneAuthCredential credential = PhoneAuthProvider.getCredential(mVerificationId, code);
+        Toast.makeText(MainActivityRegister.this, mVerificationId, Toast.LENGTH_LONG).show();
+        // editTextEmail.setText(mVerificationId);
+        try {
+            credential = PhoneAuthProvider.getCredential(mVerificationId, code);
+        } catch (RuntimeException e) {
+            editTextPassword.setError("משו השתבש לחץ כניסה שוב");
+            editTextPassword.requestFocus();
+            return;
+
+        }
 
         //signing the user
         signInWithPhoneAuthCredential(credential);
@@ -453,8 +316,7 @@
                                         registerInformation = new RegisterInformation();
                                         registerInformation.setEmail("+972" + mobile);
                                         saveRegisterDataFireBase();
-                                    }
-                                    else {
+                                    } else {
                                         d.dismiss();
                                         Intent intent = new Intent(MainActivityRegister.this, MainActivityPageUser.class);
 
@@ -472,10 +334,8 @@
                                 }
                             });
 
-
                             //verification successful we will start the profile activity
 
-
                         } else {
 
                             //verification unsuccessful.. display an error message
@@ -484,32 +344,16 @@
                             editTextPassword.requestFocus();
 
                             return;
-
-
-//                            Snackbar snackbar = Snackbar.make(findViewById(R.id.parent), message, Snackbar.LENGTH_LONG);
-//                            snackbar.setAction("Dismiss", new View.OnClickListener() {
-//                                @Override
-//                                public void onClick(View v) {
-//
-//                                }
-//                            });
-//                            snackbar.show();
                         }
                     }
                 });
     }
 
     private void saveRegisterDataFireBase() {
-
-
         DatabaseReference cardRef4 = FirebaseDatabase.getInstance().getReference("RegisterInformation").push();
-
-
         cardRef4.setValue(registerInformation);
         d.dismiss();
-        Toast.makeText(MainActivityRegister.this, "הייתי פה", Toast.LENGTH_SHORT).show();
         Intent intent = new Intent(MainActivityRegister.this, MainActivityPageUser.class);
-
         startActivity(intent);
     }
 
Index: .idea/vcs.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"VcsDirectoryMappings\">\r\n    <mapping directory=\"$PROJECT_DIR$\" vcs=\"Git\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/vcs.xml	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ .idea/vcs.xml	(date 1607572442821)
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
   <component name="VcsDirectoryMappings">
-    <mapping directory="$PROJECT_DIR$" vcs="Git" />
+    <mapping directory="" vcs="Git" />
   </component>
 </project>
\ No newline at end of file
Index: .idea/gradle.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleMigrationSettings\" migrationVersion=\"1\" />\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"PLATFORM\" />\r\n        <option name=\"distributionType\" value=\"DEFAULT_WRAPPED\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"JDK\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n        <option name=\"resolveModulePerSourceSet\" value=\"false\" />\r\n        <option name=\"useQualifiedModuleNames\" value=\"true\" />\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/gradle.xml	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ .idea/gradle.xml	(date 1607572442850)
@@ -1,6 +1,5 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
-  <component name="GradleMigrationSettings" migrationVersion="1" />
   <component name="GradleSettings">
     <option name="linkedExternalProjectsSettings">
       <GradleProjectSettings>
Index: app/src/main/java/com/example/rentit/CardCar.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.rentit;\r\n\r\nimport android.net.Uri;\r\nimport android.provider.MediaStore;\r\nimport android.widget.ImageView;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class CardCar {\r\n    private String key=\"\";\r\n    private String email=\"\";\r\n    private int numImage=0;\r\n    private int id=0;\r\n    private int permissionToPublish=0;\r\n    private String name=\"\";\r\n    private String typeCar=\"\";\r\n    private String yearCar=\"\";\r\n    private String phone=\"\";\r\n    private String priceDay=\"\";\r\n    private String insurance=\"\";\r\n    private String area=\"\";\r\n    private String city=\"\";\r\n    private String dateStart=\"\";\r\n    private String dateEnd=\"\";\r\n    private String remarks=\"\";\r\n    private List<String> imageViewArrayListName=new ArrayList<>();\r\n\r\n\r\n\r\n    public CardCar() {\r\n    }\r\n    public CardCar(String name) {\r\n        this.name=name;\r\n    }\r\n    public CardCar(CardCar c) {\r\n        this.id = c.id;\r\n        this.permissionToPublish = c.permissionToPublish;\r\n        this.name = c.name;\r\n        this.typeCar = c.typeCar;\r\n        this.yearCar = c.yearCar;\r\n        this.phone = c.phone;\r\n        this.priceDay = c.priceDay;\r\n        this.insurance = c.insurance;\r\n        this.area = c.area;\r\n        this.city = c.city;\r\n        this.dateStart = c.dateStart;\r\n        this.dateEnd = c.dateEnd;\r\n        this.remarks = c.remarks;\r\n        this.imageViewArrayListName = c.imageViewArrayListName;\r\n    }\r\n\r\n    public CardCar(int id, int permissionToPublish, String name, String typeCar, String yearCar, String phone, String priceDay, String insurance, String area, String city, String dateStart, String dateEnd, String remarks, List<String> imageViewArrayListName) {\r\n        this.id = id;\r\n        this.permissionToPublish = permissionToPublish;\r\n        this.name = name;\r\n        this.typeCar = typeCar;\r\n        this.yearCar = yearCar;\r\n        this.phone = phone;\r\n        this.priceDay = priceDay;\r\n        this.insurance = insurance;\r\n        this.area = area;\r\n        this.city = city;\r\n        this.dateStart = dateStart;\r\n        this.dateEnd = dateEnd;\r\n        this.remarks = remarks;\r\n        this.imageViewArrayListName = imageViewArrayListName;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public void removeImageViewArrayListName(String url){\r\n        imageViewArrayListName.remove(url);\r\n}\r\n    public void addImageViewArrayListName(String url){\r\n        imageViewArrayListName.add(url);\r\n    }\r\n\r\n    public List<String> getImageViewArrayListName() {\r\n        return imageViewArrayListName;\r\n    }\r\n\r\n    public void setImageViewArrayListName(List<String> imageViewArrayListName) {\r\n        this.imageViewArrayListName = imageViewArrayListName;\r\n    }\r\n\r\n    public int getPermissionToPublish() {\r\n        return permissionToPublish;\r\n    }\r\n\r\n    public void setPermissionToPublish(int permissionToPublish) {\r\n        this.permissionToPublish = permissionToPublish;\r\n    }\r\n\r\n\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getTypeCar() {\r\n        return typeCar;\r\n    }\r\n\r\n    public void setTypeCar(String typeCar) {\r\n        this.typeCar = typeCar;\r\n    }\r\n\r\n    public String getYearCar() {\r\n        return yearCar;\r\n    }\r\n\r\n    public void setYearCar(String yearCar) {\r\n        this.yearCar = yearCar;\r\n    }\r\n\r\n    public String getPhone() {\r\n        return phone;\r\n    }\r\n\r\n    public void setPhone(String phone) {\r\n        this.phone = phone;\r\n    }\r\n\r\n    public String getPriceDay() {\r\n        return priceDay;\r\n    }\r\n\r\n    public void setPriceDay(String priceDay) {\r\n        this.priceDay = priceDay;\r\n    }\r\n\r\n    public String getInsurance() {\r\n        return insurance;\r\n    }\r\n\r\n    public void setInsurance(String insurance) {\r\n        this.insurance = insurance;\r\n    }\r\n\r\n    public String getArea() {\r\n        return area;\r\n    }\r\n\r\n    public void setArea(String area) {\r\n        this.area = area;\r\n    }\r\n\r\n    public String getCity() {\r\n        return city;\r\n    }\r\n\r\n    public void setCity(String city) {\r\n        this.city = city;\r\n    }\r\n\r\n    public String getDateStart() {\r\n        return dateStart;\r\n    }\r\n\r\n    public void setDateStart(String dateStart) {\r\n        this.dateStart = dateStart;\r\n    }\r\n\r\n    public String getDateEnd() {\r\n        return dateEnd;\r\n    }\r\n\r\n    public void setDateEnd(String dateEnd) {\r\n        this.dateEnd = dateEnd;\r\n    }\r\n\r\n    public String getRemarks() {\r\n        return remarks;\r\n    }\r\n\r\n    public void setRemarks(String remarks) {\r\n        this.remarks = remarks;\r\n    }\r\n\r\n\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public int getNumImage() {\r\n        return numImage;\r\n    }\r\n\r\n    public void setNumImage(int numImage) {\r\n        this.numImage = numImage;\r\n    }\r\n\r\n    public String getKey() {\r\n        return key;\r\n    }\r\n\r\n    public void setKey(String key) {\r\n        this.key = key;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/rentit/CardCar.java	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ app/src/main/java/com/example/rentit/CardCar.java	(date 1607522788000)
@@ -24,6 +24,7 @@
     private String dateStart="";
     private String dateEnd="";
     private String remarks="";
+    private String rejection="";
     private List<String> imageViewArrayListName=new ArrayList<>();
 
 
@@ -47,25 +48,10 @@
         this.dateStart = c.dateStart;
         this.dateEnd = c.dateEnd;
         this.remarks = c.remarks;
+        this.rejection=c.rejection;
         this.imageViewArrayListName = c.imageViewArrayListName;
     }
 
-    public CardCar(int id, int permissionToPublish, String name, String typeCar, String yearCar, String phone, String priceDay, String insurance, String area, String city, String dateStart, String dateEnd, String remarks, List<String> imageViewArrayListName) {
-        this.id = id;
-        this.permissionToPublish = permissionToPublish;
-        this.name = name;
-        this.typeCar = typeCar;
-        this.yearCar = yearCar;
-        this.phone = phone;
-        this.priceDay = priceDay;
-        this.insurance = insurance;
-        this.area = area;
-        this.city = city;
-        this.dateStart = dateStart;
-        this.dateEnd = dateEnd;
-        this.remarks = remarks;
-        this.imageViewArrayListName = imageViewArrayListName;
-    }
 
     public String getEmail() {
         return email;
@@ -213,4 +199,12 @@
     public void setKey(String key) {
         this.key = key;
     }
+
+    public String getRejection() {
+        return rejection;
+    }
+
+    public void setRejection(String rejection) {
+        this.rejection = rejection;
+    }
 }
Index: .idea/jarRepositories.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"RemoteRepositoriesConfiguration\">\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"central\" />\r\n      <option name=\"name\" value=\"Maven Central repository\" />\r\n      <option name=\"url\" value=\"https://repo1.maven.org/maven2\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"jboss.community\" />\r\n      <option name=\"name\" value=\"JBoss Community repository\" />\r\n      <option name=\"url\" value=\"https://repository.jboss.org/nexus/content/repositories/public/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"BintrayJCenter\" />\r\n      <option name=\"name\" value=\"BintrayJCenter\" />\r\n      <option name=\"url\" value=\"https://jcenter.bintray.com/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"Google\" />\r\n      <option name=\"name\" value=\"Google\" />\r\n      <option name=\"url\" value=\"https://dl.google.com/dl/android/maven2/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"MavenRepo\" />\r\n      <option name=\"name\" value=\"MavenRepo\" />\r\n      <option name=\"url\" value=\"https://repo.maven.apache.org/maven2/\" />\r\n    </remote-repository>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/jarRepositories.xml	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ .idea/jarRepositories.xml	(date 1607573281449)
@@ -12,6 +12,11 @@
       <option name="url" value="https://repository.jboss.org/nexus/content/repositories/public/" />
     </remote-repository>
     <remote-repository>
+      <option name="id" value="MavenRepo" />
+      <option name="name" value="MavenRepo" />
+      <option name="url" value="https://repo.maven.apache.org/maven2/" />
+    </remote-repository>
+    <remote-repository>
       <option name="id" value="BintrayJCenter" />
       <option name="name" value="BintrayJCenter" />
       <option name="url" value="https://jcenter.bintray.com/" />
@@ -20,11 +25,6 @@
       <option name="id" value="Google" />
       <option name="name" value="Google" />
       <option name="url" value="https://dl.google.com/dl/android/maven2/" />
-    </remote-repository>
-    <remote-repository>
-      <option name="id" value="MavenRepo" />
-      <option name="name" value="MavenRepo" />
-      <option name="url" value="https://repo.maven.apache.org/maven2/" />
     </remote-repository>
   </component>
 </project>
\ No newline at end of file
Index: app/src/main/java/com/example/rentit/MainActivityRegisterCar.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.rentit;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\n\r\nimport android.Manifest;\r\nimport android.app.DownloadManager;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.bumptech.glide.Registry;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.IgnoreExtraProperties;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\n\r\nimport java.net.MalformedURLException;\r\nimport java.net.URI;\r\nimport java.net.URL;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\nimport static android.os.Environment.DIRECTORY_DOWNLOADS;\r\n\r\n\r\npublic class MainActivityRegisterCar extends AppCompatActivity {\r\n    private RegisterInformation registerInformation;\r\n    private ArrayList<String> arrayListImageName;\r\n\r\n\r\n    private DatabaseReference cardRef2;\r\n\r\n\r\n    private DatabaseReference cardRef;\r\n\r\n    private ProgressDialog progressDialog;\r\n\r\n    private StorageReference mStorageRef;\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseUser firebaseUser;\r\n\r\n    private TextView textViewWarnPhone, textViewWarnName, textViewWarnPrice, textViewWarnAll;\r\n    private TextView textViewWarnTypeCar, textViewWarnYearCar, textViewWarnInsurance, textViewWarnArea;\r\n    private TextView textViewWarnDateStart, textViewWarnDateEnd, textViewWarnCity, textViewWarnRemarker, textViewWarnImage;\r\n\r\n\r\n    private CardCar cardCar = new CardCar();\r\n    ArrayList<Uri> arrayListImageViewUri = new ArrayList<>();\r\n    ArrayList<String> areaList = new ArrayList<>();\r\n    ArrayList<ImageView> arrayListImageView = new ArrayList<>();\r\n    private ImageView imageViewTemp = null;\r\n    private ImageView imageView1;\r\n    int k;\r\n    private ImageView imageView2;\r\n    private ImageView imageView3;\r\n    private ImageView imageView4;\r\n    private EditText editTextCity;\r\n    private EditText editTextName;\r\n    private EditText editTextTypeCar;\r\n    private EditText editTextInsurance;\r\n    private EditText editTextYearCar;\r\n    private EditText editTextPriceForDay;\r\n    private EditText editTextPhone;\r\n    private EditText editTextDateStart;\r\n    private EditText editTextDateEnd;\r\n    private EditText editTextRemarks;\r\n    private EditText editTextRejection;\r\n\r\n\r\n    private Button buttonRegister, buttonDelete, buttonUpdate;\r\n    private Button buttonMyPage;\r\n    private Spinner areaSpinner;\r\n\r\n    private String email;\r\n    private String key = \"ggg\";\r\n    private String key2 = \"vvv\";\r\n    private String keyCard = \"0\";\r\n\r\n    private int flagI;\r\n    private int num;\r\n    private String url = \"\";\r\n    private int i;\r\n    private String area = \"\";\r\n    private boolean flag = false;\r\n    private CardCar cardCarEdit;\r\n    private boolean flagEdit;\r\n    private boolean flagMain;\r\n    private boolean flagManagementCardsApprov;\r\n\r\n    private Bundle bundle;\r\n    private DatabaseReference mDatabase;\r\n    private String removeImage = \"\";\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main_register_car);\r\n\r\n        progressDialog = new ProgressDialog(this);\r\n        flagManagementCardsApprov = false;\r\n        flagEdit = false;\r\n        flagMain = false;\r\n        try {\r\n            bundle = getIntent().getExtras();\r\n            flagManagementCardsApprov = bundle.getBoolean(\"flagManagement\");\r\n        } catch (RuntimeException e) {\r\n        }\r\n        try {\r\n            bundle = getIntent().getExtras();\r\n            flagMain = bundle.getBoolean(\"flagMain\");\r\n        } catch (RuntimeException e) {\r\n        }\r\n        try {\r\n            bundle = getIntent().getExtras();\r\n            flagEdit = bundle.getBoolean(\"flagEdit\");\r\n        } catch (RuntimeException e) {\r\n        }\r\n\r\n\r\n        setTextViewWarn();\r\n        setEditTxtId();\r\n        if (flagEdit || flagMain) {\r\n            cardCarEdit = new CardCar();\r\n            setCard();\r\n            setTextCard();\r\n        }\r\n        mStorageRef = FirebaseStorage.getInstance().getReference();\r\n        mAuth = FirebaseAuth.getInstance();\r\n        firebaseUser = mAuth.getCurrentUser();\r\n        try {\r\n            if(!firebaseUser.getEmail().toString().isEmpty())\r\n                email = firebaseUser.getEmail().toString();\r\n            else   email = firebaseUser.getPhoneNumber().toString();\r\n        }\r\n        catch (RuntimeException e){\r\n            email = firebaseUser.getPhoneNumber().toString();\r\n            editTextPhone.setText(email);\r\n        }\r\n\r\n        // progressDialog = new ProgressDialog(this);\r\n\r\n\r\n        setListSpinerArea();\r\n        setSpinerArea();\r\n\r\n        buttonDelete = findViewById(R.id.buttonDelete);\r\n        buttonMyPage = findViewById(R.id.buttonMyPage);\r\n        buttonRegister = findViewById(R.id.buttonReturnMainPage);\r\n\r\n        if (flagManagementCardsApprov) {\r\n            editTextRejection = findViewById(R.id.editTextRejection);\r\n            if (cardCarEdit.getPermissionToPublish() == 0) {\r\n                buttonRegister.setText(\"אישור\");\r\n                buttonDelete.setText(\"סירוב\");\r\n                buttonDelete.setVisibility(View.VISIBLE);\r\n            } else {\r\n                email=cardCarEdit.getEmail();\r\n                buttonDelete.setText(\"מחיקת כרטיס\");\r\n                buttonDelete.setVisibility(View.VISIBLE);\r\n                buttonRegister.setVisibility(View.GONE);\r\n            }\r\n                buttonMyPage.setText(\"לעמוד שלי\");\r\n\r\n        }\r\n        if (flagEdit) {\r\n            buttonRegister.setText(\"לשינוי פרטים\");\r\n            buttonDelete = findViewById(R.id.buttonDelete);\r\n            buttonDelete.setVisibility(View.VISIBLE);\r\n        }\r\n        if (flagEdit || flagManagementCardsApprov) {\r\n            buttonDelete.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if (!buttonDelete.getText().equals(\"מחיקת כרטיס\")) {\r\n                        cardsRejection();\r\n\r\n\r\n                    } else\r\n                        deleteCard();\r\n\r\n                }\r\n            });\r\n        }\r\n        if (flagMain && !flagManagementCardsApprov) {\r\n            buttonRegister.setVisibility(View.GONE);\r\n            buttonDelete = findViewById(R.id.buttonDelete);\r\n            buttonDelete.setVisibility(View.GONE);\r\n            buttonUpdate = findViewById(R.id.upgrade3);\r\n            buttonUpdate.setVisibility(View.GONE);\r\n            buttonMyPage.setText(\"לעמוד הראשי\");\r\n\r\n        }\r\n\r\n        buttonRegister.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog.setMessage(\"Registering Please Wait...\");\r\n\r\n                if (flagManagementCardsApprov) {\r\n                    cardsApprov();\r\n\r\n                } else {\r\n\r\n                    setWarnGone();\r\n                    setCardDetails();\r\n                   if (!flag) retrieveData();\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n\r\n        arrayListImageView.add(imageView1);\r\n        arrayListImageView.add(imageView2);\r\n        arrayListImageView.add(imageView3);\r\n        arrayListImageView.add(imageView4);\r\n\r\n        if (!flagMain) {\r\n            imageView1.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if (flagEdit) removeImage = cardCarEdit.getImageViewArrayListName().get(0);\r\n                    openImage(imageView1);\r\n\r\n                }\r\n            });\r\n            imageView2.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if (flagEdit && cardCarEdit.getImageViewArrayListName().size() > 1)\r\n                        removeImage = cardCarEdit.getImageViewArrayListName().get(1);\r\n                    openImage(imageView2);\r\n\r\n                }\r\n            });\r\n            imageView3.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if (flagEdit && cardCarEdit.getImageViewArrayListName().size() > 2)\r\n                        removeImage = cardCarEdit.getImageViewArrayListName().get(2);\r\n                    openImage(imageView3);\r\n\r\n                }\r\n            });\r\n            imageView4.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if (flagEdit && cardCarEdit.getImageViewArrayListName().size() > 3)\r\n                        removeImage = cardCarEdit.getImageViewArrayListName().get(3);\r\n                    openImage(imageView4);\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n        buttonMyPage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n              //  if (flagMain) {\r\n                //    Intent intent = new Intent(MainActivityRegisterCar.this, MainActivity.class);\r\n               //     startActivity(intent);\r\n             //   } else {\r\n                    Intent intent = new Intent(MainActivityRegisterCar.this, MainActivityPageUser.class);\r\n                    startActivity(intent);\r\n               // }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void cardsApprov() {\r\n        cardCarEdit.setPermissionToPublish(1);\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference(\"CardsApprov\").push();\r\n        final String keyApprov = ref.getKey();\r\n        DatabaseReference ref2 = FirebaseDatabase.getInstance().getReference(\"CardsWaitApprov\");\r\n        ref2.child(cardCarEdit.getKey()).removeValue();\r\n        cardCarEdit.setKey(keyApprov);\r\n        ref.setValue(cardCarEdit);\r\n\r\n        DatabaseReference ref3 = FirebaseDatabase.getInstance().getReference(\"RegisterInformation\");\r\n        ref3.orderByChild(\"email\").equalTo(cardCarEdit.getEmail()).addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n               // Toast.makeText(MainActivityRegisterCar.this, snapshot.toString(), Toast.LENGTH_LONG).show();\r\n                editTextRemarks.setText(snapshot.toString());\r\n                for (DataSnapshot child : snapshot.getChildren()) {\r\n                    registerInformation = child.getValue(RegisterInformation.class);\r\n                    key2 = child.getKey();\r\n                }\r\n                editTextRemarks.setText(\"lll\" + registerInformation.getEmail());\r\n\r\n                List<CardCar> cardCarList = registerInformation.getCardsUser();\r\n                for (int j = 0; j < cardCarList.size(); j++) {\r\n                    if (cardCarList.get(j).getId() == cardCarEdit.getId()) {\r\n                        registerInformation.getCardsUser().get(j).setPermissionToPublish(1);\r\n                        registerInformation.getCardsUser().get(j).setKey(keyApprov);\r\n                        editTextRemarks.setText(\"lll\" + registerInformation.getCardsUser().get(j).getPermissionToPublish());\r\n                        break;\r\n                    }\r\n                }\r\n                DatabaseReference cardR = FirebaseDatabase.getInstance().getReference();\r\n                cardR.child(\"RegisterInformation\").child(key2).setValue(registerInformation);\r\n                progressDialog.dismiss();\r\n                Intent intent = new Intent(MainActivityRegisterCar.this, MainActivityPageUser.class);\r\n                startActivity(intent);\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void cardsRejection() {\r\n        cardCarEdit.setPermissionToPublish(2);\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference(\"CardsRejection\").push();\r\n        final String keyRejection = ref.getKey();\r\n        DatabaseReference ref2 = FirebaseDatabase.getInstance().getReference(\"CardsWaitApprov\");\r\n        ref2.child(cardCarEdit.getKey()).removeValue();\r\n        cardCarEdit.setKey(keyRejection);\r\n        ref.setValue(cardCarEdit);\r\n\r\n\r\n        DatabaseReference cardRef2 = FirebaseDatabase.getInstance().getReference(\"RegisterInformation\");\r\n\r\n        cardRef2.orderByChild(\"email\").equalTo(cardCarEdit.getEmail()).addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n               // Toast.makeText(MainActivityRegisterCar.this, snapshot.toString(), Toast.LENGTH_LONG).show();\r\n                editTextRemarks.setText(snapshot.toString());\r\n                for (DataSnapshot child : snapshot.getChildren()) {\r\n                    registerInformation = child.getValue(RegisterInformation.class);\r\n                    key2 = child.getKey();\r\n                }\r\n                editTextRemarks.setText(\"lll\" + registerInformation.getEmail());\r\n                editTextCity.setText(\"lll\" + cardCarEdit.getEmail());\r\n                editTextInsurance.setText(\"lll\" + cardCarEdit.getId());\r\n\r\n\r\n                List<CardCar> cardCarList = registerInformation.getCardsUser();\r\n                for (int j = 0; j < cardCarList.size(); j++) {\r\n                    editTextTypeCar.setText(\"lll\" + \"xxxxx\");\r\n\r\n                    if (cardCarList.get(j).getId() == cardCarEdit.getId()) {\r\n                        registerInformation.getCardsUser().get(j).setPermissionToPublish(2);\r\n                        registerInformation.getCardsUser().get(j).setKey(keyRejection);\r\n                        editTextRemarks.setText(\"lll\" + registerInformation.getCardsUser().get(j).getPermissionToPublish());\r\n                        break;\r\n                    }\r\n                }\r\n                DatabaseReference cardR = FirebaseDatabase.getInstance().getReference();\r\n                cardR.child(\"RegisterInformation\").child(key2).setValue(registerInformation);\r\n\r\n                Intent intent = new Intent(MainActivityRegisterCar.this, MainActivityPageUser.class);\r\n                startActivity(intent);\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    private void setTextCard() {\r\n        List<String> urlImage = cardCarEdit.getImageViewArrayListName();\r\n        cardCar.setImageViewArrayListName(urlImage);\r\n        Glide.with(this).load(urlImage.get(0)).into(imageView1);\r\n        if (urlImage.size() > 1) {\r\n            Glide.with(this).load(urlImage.get(1)).into(imageView2);\r\n        }\r\n        if (urlImage.size() > 2) {\r\n            Glide.with(this).load(urlImage.get(2)).into(imageView3);\r\n        }\r\n        if (urlImage.size() > 3) {\r\n            Glide.with(this).load(urlImage.get(3)).into(imageView4);\r\n        }\r\n\r\n\r\n        editTextCity.setText(cardCarEdit.getCity());\r\n        editTextName.setText(cardCarEdit.getName());\r\n        editTextTypeCar.setText(cardCarEdit.getTypeCar());\r\n        editTextInsurance.setText(cardCarEdit.getInsurance());\r\n        editTextYearCar.setText(cardCarEdit.getYearCar());\r\n        editTextPriceForDay.setText(cardCarEdit.getPriceDay());\r\n        editTextPhone.setText(cardCarEdit.getPhone());\r\n        editTextDateStart.setText(cardCarEdit.getDateStart());\r\n        editTextDateEnd.setText(cardCarEdit.getDateEnd());\r\n        editTextRemarks.setText(cardCarEdit.getRemarks());\r\n    }\r\n\r\n    private void setEditTxtId() {\r\n        imageView1 = findViewById(R.id.image13);\r\n        imageView2 = findViewById(R.id.image23);\r\n        imageView3 = findViewById(R.id.image33);\r\n        imageView4 = findViewById(R.id.image43);\r\n        editTextCity = findViewById(R.id.city3);\r\n        editTextName = findViewById(R.id.nameMen3);\r\n        editTextTypeCar = findViewById(R.id.typeCar3);\r\n        editTextInsurance = findViewById(R.id.insurance3);\r\n        editTextYearCar = findViewById(R.id.yearCar3);\r\n        editTextPriceForDay = findViewById(R.id.manyDay3);\r\n        editTextPhone = findViewById(R.id.phone3);\r\n        editTextDateStart = findViewById(R.id.startDate23);\r\n        editTextDateEnd = findViewById(R.id.endDate23);\r\n        editTextRemarks = findViewById(R.id.remarksRegisterCar3);\r\n    }\r\n\r\n    private void setWarnGone() {\r\n        textViewWarnName.setVisibility(View.GONE);\r\n        textViewWarnAll.setVisibility(View.GONE);\r\n        textViewWarnArea.setVisibility(View.GONE);\r\n        textViewWarnCity.setVisibility(View.GONE);\r\n        textViewWarnDateEnd.setVisibility(View.GONE);\r\n        textViewWarnDateStart.setVisibility(View.GONE);\r\n        textViewWarnImage.setVisibility(View.GONE);\r\n        textViewWarnInsurance.setVisibility(View.GONE);\r\n        textViewWarnPhone.setVisibility(View.GONE);\r\n        textViewWarnPrice.setVisibility(View.GONE);\r\n        textViewWarnRemarker.setVisibility(View.GONE);\r\n        textViewWarnTypeCar.setVisibility(View.GONE);\r\n        textViewWarnYearCar.setVisibility(View.GONE);\r\n    }\r\n\r\n    private void setTextViewWarn() {\r\n\r\n        textViewWarnName = findViewById(R.id.warnName);\r\n        textViewWarnAll = findViewById(R.id.warnAll);\r\n        textViewWarnArea = findViewById(R.id.warnArea);\r\n        textViewWarnCity = findViewById(R.id.warnCity);\r\n        textViewWarnDateEnd = findViewById(R.id.warnDataEnd);\r\n        textViewWarnDateStart = findViewById(R.id.warnDateStart);\r\n        textViewWarnImage = findViewById(R.id.warnImage);\r\n        textViewWarnInsurance = findViewById(R.id.warnInsurance);\r\n        textViewWarnPhone = findViewById(R.id.warnPhone);\r\n        textViewWarnPrice = findViewById(R.id.warnPrice);\r\n        textViewWarnRemarker = findViewById(R.id.warnRemarker);\r\n        textViewWarnTypeCar = findViewById(R.id.warnTypeCar);\r\n        textViewWarnYearCar = findViewById(R.id.warnYearCar);\r\n\r\n\r\n    }\r\n\r\n    public void downloadFile(Context context, String fileName, String fileExtension, String destinationDirectory, String url) {\r\n        DownloadManager downloadmanager = (DownloadManager) context.\r\n                getSystemService(Context.DOWNLOAD_SERVICE);\r\n        Uri uri = Uri.parse(url);\r\n        DownloadManager.Request request = new DownloadManager.Request(uri);\r\n\r\n        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\r\n        request.setDestinationInExternalFilesDir(context, destinationDirectory, fileName + fileExtension);\r\n\r\n        downloadmanager.enqueue(request);\r\n    }\r\n\r\n\r\n    private void setCardDetails() {\r\n        flag = false;\r\n        boolean flag2 = false;\r\n\r\n        if (!flagEdit) {\r\n            flag2 = ErrWarn.errImage(area, arrayListImageViewUri.size(), textViewWarnImage);\r\n            if (!flag && flag2) flag = true;\r\n        }\r\n\r\n        flag2 = ErrWarn.errArea(area, textViewWarnArea);\r\n        if (!flag && flag2) flag = true;\r\n        cardCar.setArea(area);\r\n\r\n        String edit = editTextName.getText().toString();\r\n        flag2 = ErrWarn.errName(edit, textViewWarnName);\r\n        if (!flag && flag2) flag = true;\r\n        cardCar.setName(edit);\r\n\r\n        edit = editTextCity.getText().toString();\r\n        flag2 = ErrWarn.errCity(edit, textViewWarnCity);\r\n        if (!flag && flag2) flag = true;\r\n        cardCar.setCity(edit);\r\n\r\n        edit = editTextDateStart.getText().toString();\r\n        flag2 = ErrWarn.errStartDate(edit, textViewWarnDateStart);\r\n        if (!flag && flag2) flag = true;\r\n        cardCar.setDateStart(edit);\r\n\r\n        edit = editTextDateEnd.getText().toString();\r\n        flag2 = ErrWarn.errEndData(edit, textViewWarnDateEnd);\r\n        if (!flag && flag2) flag = true;\r\n        cardCar.setDateEnd(edit);\r\n\r\n        edit = editTextInsurance.getText().toString();\r\n        flag2 = ErrWarn.errInsurance(edit, textViewWarnInsurance);\r\n        if (!flag && flag2) flag = true;\r\n        cardCar.setInsurance(edit);\r\n\r\n        edit = editTextPhone.getText().toString();\r\n        flag2 = ErrWarn.errPhone(edit, textViewWarnPhone);\r\n        if (!flag && flag2) flag = true;\r\n        cardCar.setPhone(edit);\r\n\r\n        edit = editTextPriceForDay.getText().toString();\r\n        flag2 = ErrWarn.errPrice(edit, textViewWarnPrice);\r\n        if (!flag && flag2) flag = true;\r\n        cardCar.setPriceDay(edit);\r\n\r\n        edit = editTextRemarks.getText().toString();\r\n        flag2 = ErrWarn.errRemarker(edit, textViewWarnRemarker);\r\n        if (!flag && flag2) flag = true;\r\n        cardCar.setRemarks(edit);\r\n\r\n        edit = editTextTypeCar.getText().toString();\r\n        flag2 = ErrWarn.errTypeCar(edit, textViewWarnTypeCar);\r\n        if (!flag && flag2) flag = true;\r\n        cardCar.setTypeCar(edit);\r\n\r\n        edit = editTextYearCar.getText().toString();\r\n        flag2 = ErrWarn.errYearCar(edit, textViewWarnYearCar);\r\n        if (!flag && flag2) flag = true;\r\n        cardCar.setYearCar(edit);\r\n\r\n        if (flag) {\r\n            textViewWarnAll.setText(\"אחד הנתונים לא תקין\");\r\n            textViewWarnAll.setVisibility(View.VISIBLE);\r\n        }\r\n    }\r\n\r\n    public void openImage(ImageView imageView) {\r\n        imageViewTemp = imageView;\r\n\r\n        try {\r\n            if (ActivityCompat.checkSelfPermission(MainActivityRegisterCar.this, Manifest.permission.READ_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {\r\n                ActivityCompat.requestPermissions(MainActivityRegisterCar.this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\r\n            } else {\r\n                Intent pickPhoto = new Intent(Intent.ACTION_PICK,\r\n                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\r\n                startActivityForResult(pickPhoto, 1);\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) {\r\n        super.onActivityResult(requestCode, resultCode, imageReturnedIntent);\r\n        switch (requestCode) {\r\n            case 0:\r\n                if (resultCode == RESULT_OK) {\r\n                    Uri selectedImage = imageReturnedIntent.getData();\r\n                    arrayListImageViewUri.add(selectedImage);\r\n                    imageViewTemp.setImageURI(selectedImage);\r\n                    arrayListImageView.add(imageViewTemp);\r\n                    if (flagEdit && removeImage.length() > 0) {\r\n                        cardCar.removeImageViewArrayListName(removeImage);\r\n                        removeImage = \"\";\r\n                    }\r\n                }\r\n\r\n                break;\r\n            case 1:\r\n                if (resultCode == RESULT_OK) {\r\n                    Uri selectedImage = imageReturnedIntent.getData();\r\n                    arrayListImageViewUri.add(selectedImage);\r\n                    imageViewTemp.setImageURI(selectedImage);\r\n                    arrayListImageView.add(imageViewTemp);\r\n                    if (flagEdit && removeImage.length() > 0) {\r\n                        cardCar.removeImageViewArrayListName(removeImage);\r\n                        removeImage = \"\";\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    public void setListSpinerArea() {\r\n        areaSpinner = findViewById(R.id.spinnerArea3);\r\n        if (flagEdit) areaList.add(cardCarEdit.getArea());\r\n        else areaList.add(\"בחר אזור\");\r\n        areaList.add(\"צפון\");\r\n        areaList.add(\"מרכז\");\r\n        areaList.add(\"דרום\");\r\n        ArrayAdapter<String> areaAdapter = new ArrayAdapter<>(this,\r\n                android.R.layout.simple_spinner_dropdown_item, areaList);\r\n        areaSpinner.setAdapter(areaAdapter);\r\n    }\r\n\r\n    public void setSpinerArea() {\r\n        areaSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                area = areaList.get(i);\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    public void retrieveData() {\r\n        //  progressDialog = new ProgressDialog(this);\r\n\r\n        progressDialog.show();\r\n\r\n        cardRef = FirebaseDatabase.getInstance().getReference();\r\n        cardRef2 = FirebaseDatabase.getInstance().getReference(\"RegisterInformation\");\r\n        Toast.makeText(MainActivityRegisterCar.this, \"לפני\", Toast.LENGTH_SHORT).show();\r\n\r\n        cardRef2.orderByChild(\"email\").equalTo(email).addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n\r\n                for (DataSnapshot child : dataSnapshot.getChildren()) {\r\n                    registerInformation = child.getValue(RegisterInformation.class);\r\n                    key2 = child.getKey();\r\n\r\n                }\r\n              cardCar.setId(registerInformation.getId());\r\n              upladUriFirebase();\r\n               // Toast.makeText(MainActivityRegisterCar.this, dataSnapshot.toString(), Toast.LENGTH_LONG).show();\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    public void upladUriFirebase() {\r\n        cardCar.setEmail(email);\r\n        cardCar.setNumImage(arrayListImageViewUri.size());\r\n\r\n        arrayListImageName = new ArrayList<String>();\r\n        registerInformation.setId(registerInformation.getId() + 1);\r\n        if (flagEdit) cardCar.setImageViewArrayListName(cardCarEdit.getImageViewArrayListName());\r\n\r\n        flagI = 0;\r\n        final int length = arrayListImageViewUri.size();\r\n        if (flagEdit && length == 0) {\r\n            DatabaseReference cardRef5 = FirebaseDatabase.getInstance().getReference(\"CardsWaitApprov\").push();\r\n            cardCar.setKey(cardRef.toString());\r\n            cardRef5.child(keyCard).setValue(cardCar);\r\n            registerInformation.addCardcar(cardCar);\r\n\r\n            cardRef.child(\"RegisterInformation\").child(key2).setValue(registerInformation);\r\n\r\n            Toast.makeText(MainActivityRegisterCar.this, \"כרטיס נשמר בהצלחה\", Toast.LENGTH_SHORT).show();\r\n\r\n            deleteCard();\r\n        } else {\r\n            for (i = 0; i < length && i < 4; i++) {\r\n\r\n\r\n                num = i + 1;\r\n                String s = registerInformation.getEmail() + \"/\" + registerInformation.getId() + \"\" + num + \".jpg\";\r\n                final StorageReference riversRef = mStorageRef.child(s);\r\n                riversRef.putFile(arrayListImageViewUri.get(i))\r\n                        .addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                            @Override\r\n                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n\r\n                                taskSnapshot.getStorage().getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                    @Override\r\n                                    public void onSuccess(Uri uri) {\r\n                                        url = uri.toString();\r\n                                        flagI++;\r\n                                        if (!keyCard.equals(\"0\"))\r\n                                            registerInformation.getCardsUser().get(registerInformation.getCardsUser().size() - 1).addImageViewArrayListName(url);\r\n                                        cardCar.addImageViewArrayListName(url);\r\n\r\n\r\n                                        if (keyCard.equals(\"0\")) {\r\n                                            DatabaseReference cardRef4 = FirebaseDatabase.getInstance().getReference(\"CardsWaitApprov\").push();\r\n                                            keyCard = cardRef4.getKey();\r\n                                            cardCar.setKey(keyCard);\r\n                                            registerInformation.addCardcar(cardCar);\r\n                                            cardRef4.setValue(cardCar);\r\n                                        } else {\r\n                                            DatabaseReference cardRef5 = FirebaseDatabase.getInstance().getReference(\"CardsWaitApprov\");\r\n                                            cardRef5.child(keyCard).setValue(cardCar);\r\n                                        }\r\n\r\n                                        cardRef.child(\"RegisterInformation\").child(key2).setValue(registerInformation);\r\n                                        Toast.makeText(MainActivityRegisterCar.this, \"כרטיס נשמר בהצלחה\", Toast.LENGTH_SHORT).show();\r\n\r\n                                        if (flagEdit) deleteCard();\r\n                                        else if (flagI == length) {\r\n                                            progressDialog.dismiss();\r\n                                            Intent intent = new Intent(MainActivityRegisterCar.this, MainActivityPageUser.class);\r\n                                            startActivity(intent);\r\n\r\n                                        }\r\n\r\n\r\n                                    }\r\n                                });\r\n\r\n\r\n                            }\r\n                        })\r\n                        .addOnFailureListener(new OnFailureListener() {\r\n                            @Override\r\n                            public void onFailure(@NonNull Exception exception) {\r\n                                Toast.makeText(MainActivityRegisterCar.this, \"תמונה לא נשמרה\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                //   Toast.makeText(MainActivityRegisterCar.this, \"צלחה\"+riversRef.getDownloadUrl().toString(), Toast.LENGTH_SHORT).show();\r\n\r\n            }\r\n     }\r\n\r\n\r\n        // finish();\r\n    }\r\n\r\n\r\n    private void setCard() {\r\n        Bundle bundle = getIntent().getExtras();\r\n        cardCarEdit.setKey(bundle.getString(\"key\"));\r\n        cardCarEdit.setEmail(bundle.getString(\"email\"));\r\n        cardCarEdit.setArea(bundle.getString(\"area\"));\r\n        cardCarEdit.setNumImage(bundle.getInt(\"numImage\"));\r\n        cardCarEdit.setCity(bundle.getString(\"city\"));\r\n        cardCarEdit.setPhone(bundle.getString(\"phone\"));\r\n        cardCarEdit.setYearCar(bundle.getString(\"yearCar\"));\r\n        cardCarEdit.setTypeCar(bundle.getString(\"typeCar\"));\r\n        cardCarEdit.setRemarks(bundle.getString(\"remarks\"));\r\n        cardCarEdit.setPriceDay(bundle.getString(\"priceDay\"));\r\n        cardCarEdit.setDateEnd(bundle.getString(\"dateEnd\"));\r\n        cardCarEdit.setDateStart(bundle.getString(\"dateStart\"));\r\n        cardCarEdit.setName(bundle.getString(\"name\"));\r\n        cardCarEdit.setInsurance(bundle.getString(\"insurance\"));\r\n        cardCarEdit.setId(bundle.getInt(\"id\"));\r\n        cardCarEdit.setPermissionToPublish(bundle.getInt(\"permissionToPublish\"));\r\n\r\n        for (int i = 1; i <= cardCarEdit.getNumImage(); i++)\r\n            cardCarEdit.addImageViewArrayListName(bundle.getString(\"image\" + i));\r\n\r\n    }\r\n\r\n    public void deleteCard() {\r\n        Toast.makeText(MainActivityRegisterCar.this,email+\"lklk\", Toast.LENGTH_SHORT).show();\r\n\r\n        mDatabase = FirebaseDatabase.getInstance().getReference(\"RegisterInformation\");\r\n\r\n        cardRef2 = FirebaseDatabase.getInstance().getReference(\"RegisterInformation\");\r\n\r\n        cardRef2.orderByChild(\"email\").equalTo(email).addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                for (DataSnapshot child : dataSnapshot.getChildren()) {\r\n                    registerInformation = child.getValue(RegisterInformation.class);\r\n                    key = child.getKey();\r\n\r\n                }\r\n\r\n                for (int i = 0; i < registerInformation.getCardsUser().size(); i++) {\r\n                    if (cardCarEdit.getId() == registerInformation.getCardsUser().get(i).getId()) {\r\n                        registerInformation.removeCardCar(i);\r\n                       // Toast.makeText(MainActivityRegisterCar.this, key, Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                mDatabase.child(key).setValue(registerInformation);\r\n                if (cardCarEdit.getPermissionToPublish() == 0) {\r\n                    DatabaseReference ref2 = FirebaseDatabase.getInstance().getReference(\"CardsWaitApprov\");\r\n                    ref2.child(cardCarEdit.getKey()).removeValue();\r\n                } else if (cardCarEdit.getPermissionToPublish() == 1) {\r\n                    DatabaseReference ref2 = FirebaseDatabase.getInstance().getReference(\"CardsApprov\");\r\n                    ref2.child(cardCarEdit.getKey()).removeValue();\r\n                } else if (cardCarEdit.getPermissionToPublish() == 2) {\r\n                    DatabaseReference ref2 = FirebaseDatabase.getInstance().getReference(\"CardsRejection\");\r\n                    ref2.child(cardCarEdit.getKey()).removeValue();\r\n                }\r\n                Intent intent = new Intent(MainActivityRegisterCar.this, MainActivityPageUser.class);\r\n                startActivity(intent);\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/rentit/MainActivityRegisterCar.java	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ app/src/main/java/com/example/rentit/MainActivityRegisterCar.java	(date 1607564872000)
@@ -10,8 +10,6 @@
 import android.content.Context;
 import android.content.Intent;
 import android.content.pm.PackageManager;
-import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
 import android.net.Uri;
 import android.os.Bundle;
 import android.view.View;
@@ -25,10 +23,8 @@
 import android.widget.Toast;
 
 import com.bumptech.glide.Glide;
-import com.bumptech.glide.Registry;
 import com.google.android.gms.tasks.OnFailureListener;
 import com.google.android.gms.tasks.OnSuccessListener;
-import com.google.android.gms.tasks.Task;
 import com.google.firebase.auth.FirebaseAuth;
 import com.google.firebase.auth.FirebaseUser;
 import com.google.firebase.database.DataSnapshot;
@@ -41,14 +37,10 @@
 import com.google.firebase.storage.StorageReference;
 import com.google.firebase.storage.UploadTask;
 
-import java.net.MalformedURLException;
-import java.net.URI;
-import java.net.URL;
+
 import java.util.ArrayList;
-import java.util.HashMap;
 import java.util.List;
 
-import static android.os.Environment.DIRECTORY_DOWNLOADS;
 
 
 public class MainActivityRegisterCar extends AppCompatActivity {
@@ -57,12 +49,9 @@
 
 
     private DatabaseReference cardRef2;
-
-
     private DatabaseReference cardRef;
 
     private ProgressDialog progressDialog;
-
     private StorageReference mStorageRef;
     private FirebaseAuth mAuth;
     private FirebaseUser firebaseUser;
@@ -73,12 +62,11 @@
 
 
     private CardCar cardCar = new CardCar();
-    ArrayList<Uri> arrayListImageViewUri = new ArrayList<>();
-    ArrayList<String> areaList = new ArrayList<>();
-    ArrayList<ImageView> arrayListImageView = new ArrayList<>();
+    private ArrayList<Uri> arrayListImageViewUri = new ArrayList<>();
+    private ArrayList<String> areaList = new ArrayList<>();
+    private ArrayList<ImageView> arrayListImageView = new ArrayList<>();
     private ImageView imageViewTemp = null;
     private ImageView imageView1;
-    int k;
     private ImageView imageView2;
     private ImageView imageView3;
     private ImageView imageView4;
@@ -157,11 +145,13 @@
         mAuth = FirebaseAuth.getInstance();
         firebaseUser = mAuth.getCurrentUser();
         try {
-            if(!firebaseUser.getEmail().toString().isEmpty())
+            if (!firebaseUser.getEmail().toString().isEmpty())
                 email = firebaseUser.getEmail().toString();
-            else   email = firebaseUser.getPhoneNumber().toString();
-        }
-        catch (RuntimeException e){
+            else {
+                email = firebaseUser.getPhoneNumber().toString();
+                editTextPhone.setText(email);
+            }
+        } catch (RuntimeException e) {
             email = firebaseUser.getPhoneNumber().toString();
             editTextPhone.setText(email);
         }
@@ -177,18 +167,19 @@
         buttonRegister = findViewById(R.id.buttonReturnMainPage);
 
         if (flagManagementCardsApprov) {
+            editTextRemarks.setHint("הסבר סירוב");
             editTextRejection = findViewById(R.id.editTextRejection);
             if (cardCarEdit.getPermissionToPublish() == 0) {
                 buttonRegister.setText("אישור");
                 buttonDelete.setText("סירוב");
                 buttonDelete.setVisibility(View.VISIBLE);
             } else {
-                email=cardCarEdit.getEmail();
+                email = cardCarEdit.getEmail();
                 buttonDelete.setText("מחיקת כרטיס");
                 buttonDelete.setVisibility(View.VISIBLE);
                 buttonRegister.setVisibility(View.GONE);
             }
-                buttonMyPage.setText("לעמוד שלי");
+            buttonMyPage.setText("לעמוד שלי");
 
         }
         if (flagEdit) {
@@ -232,7 +223,7 @@
 
                     setWarnGone();
                     setCardDetails();
-                   if (!flag) retrieveData();
+                    if (!flag) retrieveData();
                 }
 
             }
@@ -285,15 +276,13 @@
         buttonMyPage.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View view) {
-              //  if (flagMain) {
-                //    Intent intent = new Intent(MainActivityRegisterCar.this, MainActivity.class);
-               //     startActivity(intent);
-             //   } else {
-                    Intent intent = new Intent(MainActivityRegisterCar.this, MainActivityPageUser.class);
-                    startActivity(intent);
-               // }
+
+                Intent intent = new Intent(MainActivityRegisterCar.this, MainActivityPageUser.class);
+                startActivity(intent);
+
             }
         });
+
     }
 
     private void cardsApprov() {
@@ -309,20 +298,19 @@
         ref3.orderByChild("email").equalTo(cardCarEdit.getEmail()).addListenerForSingleValueEvent(new ValueEventListener() {
             @Override
             public void onDataChange(@NonNull DataSnapshot snapshot) {
-               // Toast.makeText(MainActivityRegisterCar.this, snapshot.toString(), Toast.LENGTH_LONG).show();
-                editTextRemarks.setText(snapshot.toString());
+                // Toast.makeText(MainActivityRegisterCar.this, snapshot.toString(), Toast.LENGTH_LONG).show();
                 for (DataSnapshot child : snapshot.getChildren()) {
                     registerInformation = child.getValue(RegisterInformation.class);
                     key2 = child.getKey();
                 }
-                editTextRemarks.setText("lll" + registerInformation.getEmail());
+                //  editTextRemarks.setText("lll" + registerInformation.getEmail());
 
                 List<CardCar> cardCarList = registerInformation.getCardsUser();
                 for (int j = 0; j < cardCarList.size(); j++) {
                     if (cardCarList.get(j).getId() == cardCarEdit.getId()) {
                         registerInformation.getCardsUser().get(j).setPermissionToPublish(1);
                         registerInformation.getCardsUser().get(j).setKey(keyApprov);
-                        editTextRemarks.setText("lll" + registerInformation.getCardsUser().get(j).getPermissionToPublish());
+                        // editTextRemarks.setText("lll" + registerInformation.getCardsUser().get(j).getPermissionToPublish());
                         break;
                     }
                 }
@@ -344,6 +332,7 @@
     }
 
     private void cardsRejection() {
+        cardCarEdit.setRejection(editTextRemarks.getText().toString());
         cardCarEdit.setPermissionToPublish(2);
         DatabaseReference ref = FirebaseDatabase.getInstance().getReference("CardsRejection").push();
         final String keyRejection = ref.getKey();
@@ -358,25 +347,23 @@
         cardRef2.orderByChild("email").equalTo(cardCarEdit.getEmail()).addListenerForSingleValueEvent(new ValueEventListener() {
             @Override
             public void onDataChange(@NonNull DataSnapshot snapshot) {
-               // Toast.makeText(MainActivityRegisterCar.this, snapshot.toString(), Toast.LENGTH_LONG).show();
-                editTextRemarks.setText(snapshot.toString());
+                // Toast.makeText(MainActivityRegisterCar.this, snapshot.toString(), Toast.LENGTH_LONG).show();
+                //   editTextRemarks.setText(snapshot.toString());
                 for (DataSnapshot child : snapshot.getChildren()) {
                     registerInformation = child.getValue(RegisterInformation.class);
                     key2 = child.getKey();
                 }
-                editTextRemarks.setText("lll" + registerInformation.getEmail());
-                editTextCity.setText("lll" + cardCarEdit.getEmail());
-                editTextInsurance.setText("lll" + cardCarEdit.getId());
+
 
 
                 List<CardCar> cardCarList = registerInformation.getCardsUser();
                 for (int j = 0; j < cardCarList.size(); j++) {
-                    editTextTypeCar.setText("lll" + "xxxxx");
-
                     if (cardCarList.get(j).getId() == cardCarEdit.getId()) {
                         registerInformation.getCardsUser().get(j).setPermissionToPublish(2);
+                        registerInformation.getCardsUser().get(j).setRejection(
+                                editTextRemarks.getText().toString());
+
                         registerInformation.getCardsUser().get(j).setKey(keyRejection);
-                        editTextRemarks.setText("lll" + registerInformation.getCardsUser().get(j).getPermissionToPublish());
                         break;
                     }
                 }
@@ -423,6 +410,10 @@
         editTextDateStart.setText(cardCarEdit.getDateStart());
         editTextDateEnd.setText(cardCarEdit.getDateEnd());
         editTextRemarks.setText(cardCarEdit.getRemarks());
+        if (cardCarEdit.getPermissionToPublish() == 2 && cardCarEdit.getRejection().length() > 0) {
+            editTextRemarks.setText("סורב מפני: " + cardCarEdit.getRejection());
+            editTextRemarks.setTextColor(-65536);
+        }
     }
 
     private void setEditTxtId() {
@@ -473,8 +464,6 @@
         textViewWarnRemarker = findViewById(R.id.warnRemarker);
         textViewWarnTypeCar = findViewById(R.id.warnTypeCar);
         textViewWarnYearCar = findViewById(R.id.warnYearCar);
-
-
     }
 
     public void downloadFile(Context context, String fileName, String fileExtension, String destinationDirectory, String url) {
@@ -655,9 +644,9 @@
                     key2 = child.getKey();
 
                 }
-              cardCar.setId(registerInformation.getId());
-              upladUriFirebase();
-               // Toast.makeText(MainActivityRegisterCar.this, dataSnapshot.toString(), Toast.LENGTH_LONG).show();
+                cardCar.setId(registerInformation.getId());
+                upladUriFirebase();
+                // Toast.makeText(MainActivityRegisterCar.this, dataSnapshot.toString(), Toast.LENGTH_LONG).show();
 
             }
 
@@ -751,7 +740,7 @@
                 //   Toast.makeText(MainActivityRegisterCar.this, "צלחה"+riversRef.getDownloadUrl().toString(), Toast.LENGTH_SHORT).show();
 
             }
-     }
+        }
 
 
         // finish();
@@ -776,6 +765,7 @@
         cardCarEdit.setInsurance(bundle.getString("insurance"));
         cardCarEdit.setId(bundle.getInt("id"));
         cardCarEdit.setPermissionToPublish(bundle.getInt("permissionToPublish"));
+        cardCarEdit.setRejection(bundle.getString("rejection"));
 
         for (int i = 1; i <= cardCarEdit.getNumImage(); i++)
             cardCarEdit.addImageViewArrayListName(bundle.getString("image" + i));
@@ -783,7 +773,7 @@
     }
 
     public void deleteCard() {
-        Toast.makeText(MainActivityRegisterCar.this,email+"lklk", Toast.LENGTH_SHORT).show();
+        Toast.makeText(MainActivityRegisterCar.this, email + "lklk", Toast.LENGTH_SHORT).show();
 
         mDatabase = FirebaseDatabase.getInstance().getReference("RegisterInformation");
 
@@ -801,7 +791,7 @@
                 for (int i = 0; i < registerInformation.getCardsUser().size(); i++) {
                     if (cardCarEdit.getId() == registerInformation.getCardsUser().get(i).getId()) {
                         registerInformation.removeCardCar(i);
-                       // Toast.makeText(MainActivityRegisterCar.this, key, Toast.LENGTH_SHORT).show();
+                        // Toast.makeText(MainActivityRegisterCar.this, key, Toast.LENGTH_SHORT).show();
                         break;
                     }
                 }
Index: app/src/main/java/com/example/rentit/MainActivityManagementCardsApprov.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.rentit;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.Button;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\n\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class MainActivityManagementCardsApprov extends AppCompatActivity {\r\n    private DatabaseReference cardRef2;\r\n    private List<CardCar> arrayListCards;\r\n    private RegisterInformation registerInformation;\r\n    private CardCarAdapter cardCarAdapter = null;\r\n    private ListView lv1;\r\n    private Button buttonMainReturn, buttonRejection, buttonApprov, buttonWitheApprov;\r\n    private TextView textViewRejection, textViewApprov, textViewWitheApprov;\r\n    private boolean flagNum=true;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main_management_cards_approv);\r\n        textViewWitheApprov = findViewById(R.id.textViewNumWaitAprove);\r\n        textViewApprov = findViewById(R.id.textViewNumAprove);\r\n        textViewRejection= findViewById(R.id.textViewNumReject);\r\n        buttonApprov = findViewById(R.id.buttonApprov);\r\n        buttonWitheApprov = findViewById(R.id.buttonWhite);\r\n        buttonRejection = findViewById(R.id.buttonRejection);\r\n        buttonMainReturn = findViewById(R.id.buttonMainReturn);\r\n        numCards();\r\n        buttonApprov.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                playCards2(\"CardsApprov\");\r\n            }\r\n        });\r\n        buttonWitheApprov.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                playCards2(\"CardsWaitApprov\");\r\n            }\r\n        });\r\n        buttonRejection.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                playCards2(\"CardsRejection\");\r\n\r\n            }\r\n        });\r\n        buttonMainReturn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(MainActivityManagementCardsApprov.this, MainActivity.class);\r\n                startActivityForResult(intent, 0);\r\n            }\r\n        });\r\n\r\n\r\n        playCards2(\"CardsWaitApprov\");\r\n\r\n\r\n    }\r\n\r\n    private void numCards() {\r\n        playCards(\"CardsApprov\");\r\n\r\n        playCards(\"CardsWaitApprov\");\r\n\r\n        playCards(\"CardsRejection\");\r\n    }\r\n\r\n    private void playCards(final String type) {\r\n        cardRef2 = FirebaseDatabase.getInstance().getReference(type);\r\n        cardRef2.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                arrayListCards = new ArrayList();\r\n                CardCar cardCar;\r\n                for (DataSnapshot child : dataSnapshot.getChildren()) {\r\n\r\n                    cardCar = child.getValue(CardCar.class);\r\n                    arrayListCards.add(cardCar);\r\n                }\r\n\r\n                   int numCards = arrayListCards.size();\r\n                    if (type.equals(\"CardsWaitApprov\"))\r\n                        textViewWitheApprov.setText(\"\"+numCards);\r\n                    if (type.equals(\"CardsRejection\"))\r\n                        textViewRejection.setText(\"\"+numCards);\r\n                    if (type.equals(\"CardsApprov\"))\r\n                        textViewApprov.setText(\"\"+numCards);\r\n\r\n\r\n\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void playCards2(final String type) {\r\n        cardRef2 = FirebaseDatabase.getInstance().getReference(type);\r\n        cardRef2.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                arrayListCards = new ArrayList();\r\n                CardCar cardCar;\r\n                for (DataSnapshot child : dataSnapshot.getChildren()) {\r\n\r\n                    cardCar = child.getValue(CardCar.class);\r\n                    arrayListCards.add(cardCar);\r\n                }\r\n\r\n                if (arrayListCards.size() > 0) {\r\n                    // Toast.makeText(MainActivityPageUser.this, \"\"+registerInformation.getCardsUser().get(0).getImageViewArrayListName().get(0), Toast.LENGTH_LONG).show();\r\n\r\n                    cardCarAdapter = new CardCarAdapter(MainActivityManagementCardsApprov.this, 0, 0, arrayListCards);\r\n                    //phase 4 reference to listview\r\n                    lv1 = (ListView) findViewById(R.id.lvMange);\r\n                    lv1.setAdapter(cardCarAdapter);\r\n\r\n                    lv1.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                        @Override\r\n                        public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {\r\n                            Intent intent = new Intent(MainActivityManagementCardsApprov.this, MainActivityRegisterCar.class);\r\n                            intent.putExtra(\"flagManagement\", true);\r\n                            intent.putExtra(\"flagMain\", true);\r\n                            pass(intent, arrayListCards.get(i));\r\n                            startActivityForResult(intent, 0);\r\n                        }\r\n                    });\r\n                }\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void pass(Intent intent, CardCar cardCar) {\r\n        intent.putExtra(\"flag\", true);\r\n        intent.putExtra(\"name\", cardCar.getName());\r\n        intent.putExtra(\"typeCar\", cardCar.getTypeCar());\r\n        intent.putExtra(\"area\", cardCar.getArea());\r\n        intent.putExtra(\"city\", cardCar.getCity());\r\n        intent.putExtra(\"dateEnd\", cardCar.getDateEnd());\r\n        intent.putExtra(\"dateStart\", cardCar.getDateStart());\r\n        intent.putExtra(\"id\", cardCar.getId());\r\n        intent.putExtra(\"insurance\", cardCar.getInsurance());\r\n        intent.putExtra(\"numImage\", cardCar.getImageViewArrayListName().size());\r\n        intent.putExtra(\"permissionToPublish\", cardCar.getPermissionToPublish());\r\n        intent.putExtra(\"phone\", cardCar.getPhone());\r\n        intent.putExtra(\"priceDay\", cardCar.getPriceDay());\r\n        intent.putExtra(\"remarks\", cardCar.getRemarks());\r\n        intent.putExtra(\"yearCar\", cardCar.getYearCar());\r\n        intent.putExtra(\"email\", cardCar.getEmail());\r\n        intent.putExtra(\"key\", cardCar.getKey());\r\n\r\n        for (int i = 1; i <= cardCar.getImageViewArrayListName().size(); i++) {\r\n            intent.putExtra(\"image\" + i, cardCar.getImageViewArrayListName().get(i - 1));\r\n        }\r\n\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/rentit/MainActivityManagementCardsApprov.java	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ app/src/main/java/com/example/rentit/MainActivityManagementCardsApprov.java	(date 1607563786000)
@@ -23,12 +23,13 @@
 public class MainActivityManagementCardsApprov extends AppCompatActivity {
     private DatabaseReference cardRef2;
     private List<CardCar> arrayListCards;
-    private RegisterInformation registerInformation;
     private CardCarAdapter cardCarAdapter = null;
     private ListView lv1;
     private Button buttonMainReturn, buttonRejection, buttonApprov, buttonWitheApprov;
     private TextView textViewRejection, textViewApprov, textViewWitheApprov;
-    private boolean flagNum=true;
+    private boolean flagNum = true;
+    private int numCards = -1;
+    CardCar cardCar;
 
 
     @Override
@@ -37,7 +38,7 @@
         setContentView(R.layout.activity_main_management_cards_approv);
         textViewWitheApprov = findViewById(R.id.textViewNumWaitAprove);
         textViewApprov = findViewById(R.id.textViewNumAprove);
-        textViewRejection= findViewById(R.id.textViewNumReject);
+        textViewRejection = findViewById(R.id.textViewNumReject);
         buttonApprov = findViewById(R.id.buttonApprov);
         buttonWitheApprov = findViewById(R.id.buttonWhite);
         buttonRejection = findViewById(R.id.buttonRejection);
@@ -71,17 +72,15 @@
         });
 
 
-        playCards2("CardsWaitApprov");
+         playCards2("CardsWaitApprov");
 
 
     }
 
     private void numCards() {
         playCards("CardsApprov");
-
-        playCards("CardsWaitApprov");
-
         playCards("CardsRejection");
+        playCards("CardsWaitApprov");
     }
 
     private void playCards(final String type) {
@@ -90,25 +89,26 @@
             @Override
             public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
                 arrayListCards = new ArrayList();
-                CardCar cardCar;
+                cardCar = new CardCar();
                 for (DataSnapshot child : dataSnapshot.getChildren()) {
-
-                    cardCar = child.getValue(CardCar.class);
-                    arrayListCards.add(cardCar);
+                    try {
+                        cardCar = child.getValue(CardCar.class);
+                        arrayListCards.add(cardCar);
+
+                    } catch (RuntimeException e) {
+
+                    }
                 }
 
-                   int numCards = arrayListCards.size();
-                    if (type.equals("CardsWaitApprov"))
-                        textViewWitheApprov.setText(""+numCards);
-                    if (type.equals("CardsRejection"))
-                        textViewRejection.setText(""+numCards);
-                    if (type.equals("CardsApprov"))
-                        textViewApprov.setText(""+numCards);
+                numCards = arrayListCards.size();
+                if (type.equals("CardsWaitApprov"))
+                    textViewWitheApprov.setText("" + numCards);
+                if (type.equals("CardsRejection"))
+                    textViewRejection.setText("" + numCards);
+                if (type.equals("CardsApprov"))
+                    textViewApprov.setText("" + numCards);
 
 
-
-
-
             }
 
             @Override
@@ -127,8 +127,13 @@
                 CardCar cardCar;
                 for (DataSnapshot child : dataSnapshot.getChildren()) {
 
-                    cardCar = child.getValue(CardCar.class);
-                    arrayListCards.add(cardCar);
+                    try {
+                        cardCar = child.getValue(CardCar.class);
+                        arrayListCards.add(cardCar);
+
+                    } catch (RuntimeException e) {
+
+                    }
                 }
 
                 if (arrayListCards.size() > 0) {
@@ -179,6 +184,7 @@
         intent.putExtra("yearCar", cardCar.getYearCar());
         intent.putExtra("email", cardCar.getEmail());
         intent.putExtra("key", cardCar.getKey());
+        intent.putExtra("rejection", cardCar.getRejection());
 
         for (int i = 1; i <= cardCar.getImageViewArrayListName().size(); i++) {
             intent.putExtra("image" + i, cardCar.getImageViewArrayListName().get(i - 1));
Index: app/src/main/res/layout/activity_main.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:fillViewport=\"true\"\r\n    tools:context=\".MainActivity\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/title\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n\r\n            android:layout_marginTop=\"17dp\"\r\n            android:text=\"Rentit!- השכרת רכבים\"\r\n\r\n            android:textSize=\"30dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/register\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/login\"\r\n            style=\"@style/Widget.AppCompat.Button.Small\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n\r\n            android:layout_marginTop=\"3dp\"\r\n            android:layout_marginEnd=\"5dp\"\r\n            android:text=\"כניסה\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/register\"\r\n            style=\"@style/Widget.AppCompat.Button.Small\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n\r\n            android:layout_marginTop=\"3dp\"\r\n            android:layout_marginEnd=\"10dp\"\r\n            android:text=\"הרשמה\"\r\n            app:layout_constraintEnd_toStartOf=\"@+id/login\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/feedback\"\r\n            style=\"@style/Widget.AppCompat.Button.Small\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"משוב\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n        <Spinner\r\n            android:id=\"@+id/price\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"14dp\"\r\n            android:layout_marginEnd=\"71dp\"\r\n            app:layout_constraintEnd_toStartOf=\"@+id/area\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/title\" />\r\n\r\n        <Spinner\r\n            android:id=\"@+id/area\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n\r\n\r\n            android:layout_marginTop=\"14dp\"\r\n            android:visibility=\"visible\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/title\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/title\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/endData\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n\r\n            android:layout_marginTop=\"14dp\"\r\n            android:ems=\"6\"\r\n            android:hint=\"עד תאריך\"\r\n            android:inputType=\"date\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/area\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/area\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/startData\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"14dp\"\r\n            android:layout_marginEnd=\"5dp\"\r\n            android:ems=\"6\"\r\n            android:hint=\"מתאריך\"\r\n            android:inputType=\"date\"\r\n            app:layout_constraintEnd_toStartOf=\"@+id/endData\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/price\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/search\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:text=\"חיפוש\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/endData\"\r\n            app:layout_constraintStart_toStartOf=\"@+id/startData\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/startData\" />\r\n\r\n        <ListView\r\n            android:id=\"@+id/lvMange\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_marginTop=\"340dp\"\r\n            app:layout_constraintTop_toTopOf=\"parent\"\r\n            tools:layout_editor_absoluteX=\"16dp\" />\r\n\r\n\r\n        <Button\r\n            android:id=\"@+id/buttonSeeAll\"\r\n            style=\"@style/Widget.AppCompat.Button.Small\"\r\n            android:layout_width=\"wrap_content\"\r\n\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:text=\"כל הכרטיסים\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintStart_toEndOf=\"@+id/search\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/endData\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textViewWarnSearch\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n\r\n            android:layout_marginTop=\"3dp\"\r\n            android:text=\"לא נמצאו כרטיסים תואמים\"\r\n            android:textColor=\"#EF2B2B\"\r\n            android:visibility=\"gone\"\r\n            app:layout_constraintEnd_toEndOf=\"@+id/search\"\r\n            app:layout_constraintStart_toStartOf=\"@+id/search\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/search\" />\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n\r\n</ScrollView>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_main.xml	(revision 13575c5bcd2ec5f8a7e627b08386ab86e4bf6a27)
+++ app/src/main/res/layout/activity_main.xml	(date 1607527274000)
@@ -113,11 +113,12 @@
 
         <ListView
             android:id="@+id/lvMange"
-            android:layout_width="match_parent"
-            android:layout_height="match_parent"
-            android:layout_marginTop="340dp"
-            app:layout_constraintTop_toTopOf="parent"
-            tools:layout_editor_absoluteX="16dp" />
+            android:layout_width="404dp"
+            android:layout_height="659dp"
+            android:layout_marginTop="22dp"
+            app:layout_constraintEnd_toEndOf="parent"
+            app:layout_constraintStart_toStartOf="parent"
+            app:layout_constraintTop_toBottomOf="@+id/search" />
 
 
         <Button
@@ -138,7 +139,7 @@
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
 
-            android:layout_marginTop="3dp"
+            android:layout_marginTop="2dp"
             android:text="לא נמצאו כרטיסים תואמים"
             android:textColor="#EF2B2B"
             android:visibility="gone"
